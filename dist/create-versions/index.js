var lo=Object.create;var xt=Object.defineProperty;var ho=Object.getOwnPropertyDescriptor;var fo=Object.getOwnPropertyNames;var po=Object.getPrototypeOf,mo=Object.prototype.hasOwnProperty;var yo=e=>xt(e,"__esModule",{value:!0});var b=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var go=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of fo(t))!mo.call(e,s)&&s!=="default"&&xt(e,s,{get:()=>t[s],enumerable:!(r=ho(t,s))||r.enumerable});return e},Ct=e=>go(yo(xt(e!=null?lo(po(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var Be=(e,t,r)=>new Promise((s,n)=>{var i=l=>{try{a(r.next(l))}catch(u){n(u)}},o=l=>{try{a(r.throw(l))}catch(u){n(u)}},a=l=>l.done?s(l.value):Promise.resolve(l.value).then(i,o);a((r=r.apply(e,t)).next())});var it=b(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.toCommandProperties=Oe.toCommandValue=void 0;function _o(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}Oe.toCommandValue=_o;function wo(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}Oe.toCommandProperties=wo});var rs=b(K=>{"use strict";var bo=K&&K.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),vo=K&&K.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Eo=K&&K.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&bo(t,e,r);return vo(t,e),t};Object.defineProperty(K,"__esModule",{value:!0});K.issue=K.issueCommand=void 0;var So=Eo(require("os")),Xr=it();function Zr(e,t,r){let s=new ts(e,t,r);process.stdout.write(s.toString()+So.EOL)}K.issueCommand=Zr;function To(e,t=""){Zr(e,{},t)}K.issue=To;var es="::",ts=class{constructor(t,r,s){t||(t="missing.command"),this.command=t,this.properties=r,this.message=s}toString(){let t=es+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let s in this.properties)if(this.properties.hasOwnProperty(s)){let n=this.properties[s];n&&(r?r=!1:t+=",",t+=`${s}=${Oo(n)}`)}}return t+=`${es}${Ro(this.message)}`,t}};function Ro(e){return Xr.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Oo(e){return Xr.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});var is=b(ne=>{"use strict";var Po=ne&&ne.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),Ao=ne&&ne.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),ss=ne&&ne.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Po(t,e,r);return Ao(t,e),t};Object.defineProperty(ne,"__esModule",{value:!0});ne.issueCommand=void 0;var ns=ss(require("fs")),xo=ss(require("os")),Co=it();function ko(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!ns.existsSync(r))throw new Error(`Missing file at path: ${r}`);ns.appendFileSync(r,`${Co.toCommandValue(t)}${xo.EOL}`,{encoding:"utf8"})}ne.issueCommand=ko});var as=b(ot=>{"use strict";Object.defineProperty(ot,"__esModule",{value:!0});function qo(e){let t=e.protocol==="https:",r;if(os(e))return r;let s;return t?s=process.env.https_proxy||process.env.HTTPS_PROXY:s=process.env.http_proxy||process.env.HTTP_PROXY,s&&(r=new URL(s)),r}ot.getProxyUrl=qo;function os(e){if(!e.hostname)return!1;let t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let r;e.port?r=Number(e.port):e.protocol==="http:"?r=80:e.protocol==="https:"&&(r=443);let s=[e.hostname.toUpperCase()];typeof r=="number"&&s.push(`${s[0]}:${r}`);for(let n of t.split(",").map(i=>i.trim().toUpperCase()).filter(i=>i))if(s.some(i=>i===n))return!0;return!1}ot.checkBypass=os});var hs=b(Pe=>{"use strict";var Pl=require("net"),jo=require("tls"),kt=require("http"),cs=require("https"),Mo=require("events"),Al=require("assert"),Do=require("util");Pe.httpOverHttp=$o;Pe.httpsOverHttp=Io;Pe.httpOverHttps=Uo;Pe.httpsOverHttps=Lo;function $o(e){var t=new ae(e);return t.request=kt.request,t}function Io(e){var t=new ae(e);return t.request=kt.request,t.createSocket=us,t.defaultPort=443,t}function Uo(e){var t=new ae(e);return t.request=cs.request,t}function Lo(e){var t=new ae(e);return t.request=cs.request,t.createSocket=us,t.defaultPort=443,t}function ae(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||kt.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(s,n,i,o){for(var a=ls(n,i,o),l=0,u=t.requests.length;l<u;++l){var y=t.requests[l];if(y.host===a.host&&y.port===a.port){t.requests.splice(l,1),y.request.onSocket(s);return}}s.destroy(),t.removeSocket(s)})}Do.inherits(ae,Mo.EventEmitter);ae.prototype.addRequest=function(t,r,s,n){var i=this,o=qt({request:t},i.options,ls(r,s,n));if(i.sockets.length>=this.maxSockets){i.requests.push(o);return}i.createSocket(o,function(a){a.on("free",l),a.on("close",u),a.on("agentRemove",u),t.onSocket(a);function l(){i.emit("free",a,o)}function u(y){i.removeSocket(a),a.removeListener("free",l),a.removeListener("close",u),a.removeListener("agentRemove",u)}})};ae.prototype.createSocket=function(t,r){var s=this,n={};s.sockets.push(n);var i=qt({},s.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(i.localAddress=t.localAddress),i.proxyAuth&&(i.headers=i.headers||{},i.headers["Proxy-Authorization"]="Basic "+new Buffer(i.proxyAuth).toString("base64")),me("making CONNECT request");var o=s.request(i);o.useChunkedEncodingByDefault=!1,o.once("response",a),o.once("upgrade",l),o.once("connect",u),o.once("error",y),o.end();function a(f){f.upgrade=!0}function l(f,d,m){process.nextTick(function(){u(f,d,m)})}function u(f,d,m){if(o.removeAllListeners(),d.removeAllListeners(),f.statusCode!==200){me("tunneling socket could not be established, statusCode=%d",f.statusCode),d.destroy();var g=new Error("tunneling socket could not be established, statusCode="+f.statusCode);g.code="ECONNRESET",t.request.emit("error",g),s.removeSocket(n);return}if(m.length>0){me("got illegal response body from proxy"),d.destroy();var g=new Error("got illegal response body from proxy");g.code="ECONNRESET",t.request.emit("error",g),s.removeSocket(n);return}return me("tunneling connection has established"),s.sockets[s.sockets.indexOf(n)]=d,r(d)}function y(f){o.removeAllListeners(),me(`tunneling socket could not be established, cause=%s
`,f.message,f.stack);var d=new Error("tunneling socket could not be established, cause="+f.message);d.code="ECONNRESET",t.request.emit("error",d),s.removeSocket(n)}};ae.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var s=this.requests.shift();s&&this.createSocket(s,function(n){s.request.onSocket(n)})}};function us(e,t){var r=this;ae.prototype.createSocket.call(r,e,function(s){var n=e.request.getHeader("host"),i=qt({},r.options,{socket:s,servername:n?n.replace(/:.*$/,""):e.host}),o=jo.connect(0,i);r.sockets[r.sockets.indexOf(s)]=o,t(o)})}function ls(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function qt(e){for(var t=1,r=arguments.length;t<r;++t){var s=arguments[t];if(typeof s=="object")for(var n=Object.keys(s),i=0,o=n.length;i<o;++i){var a=n[i];s[a]!==void 0&&(e[a]=s[a])}}return e}var me;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?me=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:me=function(){};Pe.debug=me});var ds=b((Cl,fs)=>{fs.exports=hs()});var ms=b(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});var at=require("http"),jt=require("https"),ps=as(),Ae,ee;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(ee=J.HttpCodes||(J.HttpCodes={}));var V;(function(e){e.Accept="accept",e.ContentType="content-type"})(V=J.Headers||(J.Headers={}));var ye;(function(e){e.ApplicationJson="application/json"})(ye=J.MediaTypes||(J.MediaTypes={}));function Ho(e){let t=ps.getProxyUrl(new URL(e));return t?t.href:""}J.getProxyUrl=Ho;var No=[ee.MovedPermanently,ee.ResourceMoved,ee.SeeOther,ee.TemporaryRedirect,ee.PermanentRedirect],Bo=[ee.BadGateway,ee.ServiceUnavailable,ee.GatewayTimeout],zo=["OPTIONS","GET","DELETE","HEAD"],Fo=10,Vo=5,ze=class extends Error{constructor(t,r){super(t);this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,ze.prototype)}};J.HttpClientError=ze;var Mt=class{constructor(t){this.message=t}readBody(){return new Promise(async(t,r)=>{let s=Buffer.alloc(0);this.message.on("data",n=>{s=Buffer.concat([s,n])}),this.message.on("end",()=>{t(s.toString())})})}};J.HttpClientResponse=Mt;function Wo(e){return new URL(e).protocol==="https:"}J.isHttps=Wo;var ct=class{constructor(t,r,s){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=s,s&&(s.ignoreSslError!=null&&(this._ignoreSslError=s.ignoreSslError),this._socketTimeout=s.socketTimeout,s.allowRedirects!=null&&(this._allowRedirects=s.allowRedirects),s.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=s.allowRedirectDowngrade),s.maxRedirects!=null&&(this._maxRedirects=Math.max(s.maxRedirects,0)),s.keepAlive!=null&&(this._keepAlive=s.keepAlive),s.allowRetries!=null&&(this._allowRetries=s.allowRetries),s.maxRetries!=null&&(this._maxRetries=s.maxRetries))}options(t,r){return this.request("OPTIONS",t,null,r||{})}get(t,r){return this.request("GET",t,null,r||{})}del(t,r){return this.request("DELETE",t,null,r||{})}post(t,r,s){return this.request("POST",t,r,s||{})}patch(t,r,s){return this.request("PATCH",t,r,s||{})}put(t,r,s){return this.request("PUT",t,r,s||{})}head(t,r){return this.request("HEAD",t,null,r||{})}sendStream(t,r,s,n){return this.request(t,r,s,n)}async getJson(t,r={}){r[V.Accept]=this._getExistingOrDefaultHeader(r,V.Accept,ye.ApplicationJson);let s=await this.get(t,r);return this._processResponse(s,this.requestOptions)}async postJson(t,r,s={}){let n=JSON.stringify(r,null,2);s[V.Accept]=this._getExistingOrDefaultHeader(s,V.Accept,ye.ApplicationJson),s[V.ContentType]=this._getExistingOrDefaultHeader(s,V.ContentType,ye.ApplicationJson);let i=await this.post(t,n,s);return this._processResponse(i,this.requestOptions)}async putJson(t,r,s={}){let n=JSON.stringify(r,null,2);s[V.Accept]=this._getExistingOrDefaultHeader(s,V.Accept,ye.ApplicationJson),s[V.ContentType]=this._getExistingOrDefaultHeader(s,V.ContentType,ye.ApplicationJson);let i=await this.put(t,n,s);return this._processResponse(i,this.requestOptions)}async patchJson(t,r,s={}){let n=JSON.stringify(r,null,2);s[V.Accept]=this._getExistingOrDefaultHeader(s,V.Accept,ye.ApplicationJson),s[V.ContentType]=this._getExistingOrDefaultHeader(s,V.ContentType,ye.ApplicationJson);let i=await this.patch(t,n,s);return this._processResponse(i,this.requestOptions)}async request(t,r,s,n){if(this._disposed)throw new Error("Client has already been disposed.");let i=new URL(r),o=this._prepareRequest(t,i,n),a=this._allowRetries&&zo.indexOf(t)!=-1?this._maxRetries+1:1,l=0,u;for(;l<a;){if(u=await this.requestRaw(o,s),u&&u.message&&u.message.statusCode===ee.Unauthorized){let f;for(let d=0;d<this.handlers.length;d++)if(this.handlers[d].canHandleAuthentication(u)){f=this.handlers[d];break}return f?f.handleAuthentication(this,o,s):u}let y=this._maxRedirects;for(;No.indexOf(u.message.statusCode)!=-1&&this._allowRedirects&&y>0;){let f=u.message.headers.location;if(!f)break;let d=new URL(f);if(i.protocol=="https:"&&i.protocol!=d.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(await u.readBody(),d.hostname!==i.hostname)for(let m in n)m.toLowerCase()==="authorization"&&delete n[m];o=this._prepareRequest(t,d,n),u=await this.requestRaw(o,s),y--}if(Bo.indexOf(u.message.statusCode)==-1)return u;l+=1,l<a&&(await u.readBody(),await this._performExponentialBackoff(l))}return u}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return new Promise((s,n)=>{let i=function(o,a){o&&n(o),s(a)};this.requestRawWithCallback(t,r,i)})}requestRawWithCallback(t,r,s){let n;typeof r=="string"&&(t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let i=!1,o=(l,u)=>{i||(i=!0,s(l,u))},a=t.httpModule.request(t.options,l=>{let u=new Mt(l);o(null,u)});a.on("socket",l=>{n=l}),a.setTimeout(this._socketTimeout||3*6e4,()=>{n&&n.end(),o(new Error("Request timeout: "+t.options.path),null)}),a.on("error",function(l){o(l,null)}),r&&typeof r=="string"&&a.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){a.end()}),r.pipe(a)):a.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,s){let n={};n.parsedUrl=r;let i=n.parsedUrl.protocol==="https:";n.httpModule=i?jt:at;let o=i?443:80;return n.options={},n.options.host=n.parsedUrl.hostname,n.options.port=n.parsedUrl.port?parseInt(n.parsedUrl.port):o,n.options.path=(n.parsedUrl.pathname||"")+(n.parsedUrl.search||""),n.options.method=t,n.options.headers=this._mergeHeaders(s),this.userAgent!=null&&(n.options.headers["user-agent"]=this.userAgent),n.options.agent=this._getAgent(n.parsedUrl),this.handlers&&this.handlers.forEach(a=>{a.prepareRequest(n.options)}),n}_mergeHeaders(t){let r=s=>Object.keys(s).reduce((n,i)=>(n[i.toLowerCase()]=s[i],n),{});return this.requestOptions&&this.requestOptions.headers?Object.assign({},r(this.requestOptions.headers),r(t)):r(t||{})}_getExistingOrDefaultHeader(t,r,s){let n=o=>Object.keys(o).reduce((a,l)=>(a[l.toLowerCase()]=o[l],a),{}),i;return this.requestOptions&&this.requestOptions.headers&&(i=n(this.requestOptions.headers)[r]),t[r]||i||s}_getAgent(t){let r,s=ps.getProxyUrl(t),n=s&&s.hostname;if(this._keepAlive&&n&&(r=this._proxyAgent),this._keepAlive&&!n&&(r=this._agent),r)return r;let i=t.protocol==="https:",o=100;if(this.requestOptions&&(o=this.requestOptions.maxSockets||at.globalAgent.maxSockets),n){Ae||(Ae=ds());let a={maxSockets:o,keepAlive:this._keepAlive,proxy:{...(s.username||s.password)&&{proxyAuth:`${s.username}:${s.password}`},host:s.hostname,port:s.port}},l,u=s.protocol==="https:";i?l=u?Ae.httpsOverHttps:Ae.httpsOverHttp:l=u?Ae.httpOverHttps:Ae.httpOverHttp,r=l(a),this._proxyAgent=r}if(this._keepAlive&&!r){let a={keepAlive:this._keepAlive,maxSockets:o};r=i?new jt.Agent(a):new at.Agent(a),this._agent=r}return r||(r=i?jt.globalAgent:at.globalAgent),i&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){t=Math.min(Fo,t);let r=Vo*Math.pow(2,t);return new Promise(s=>setTimeout(()=>s(),r))}static dateTimeDeserializer(t,r){if(typeof r=="string"){let s=new Date(r);if(!isNaN(s.valueOf()))return s}return r}async _processResponse(t,r){return new Promise(async(s,n)=>{let i=t.message.statusCode,o={statusCode:i,result:null,headers:{}};i==ee.NotFound&&s(o);let a,l;try{l=await t.readBody(),l&&l.length>0&&(r&&r.deserializeDates?a=JSON.parse(l,ct.dateTimeDeserializer):a=JSON.parse(l),o.result=a),o.headers=t.message.headers}catch{}if(i>299){let u;a&&a.message?u=a.message:l&&l.length>0?u=l:u="Failed request: ("+i+")";let y=new ze(u,i);y.result=o.result,n(y)}else s(o)})}};J.HttpClient=ct});var ws=b(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});var ys=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){t.headers.Authorization="Basic "+Buffer.from(this.username+":"+this.password).toString("base64")}canHandleAuthentication(t){return!1}handleAuthentication(t,r,s){return null}};Fe.BasicCredentialHandler=ys;var gs=class{constructor(t){this.token=t}prepareRequest(t){t.headers.Authorization="Bearer "+this.token}canHandleAuthentication(t){return!1}handleAuthentication(t,r,s){return null}};Fe.BearerCredentialHandler=gs;var _s=class{constructor(t){this.token=t}prepareRequest(t){t.headers.Authorization="Basic "+Buffer.from("PAT:"+this.token).toString("base64")}canHandleAuthentication(t){return!1}handleAuthentication(t,r,s){return null}};Fe.PersonalAccessTokenCredentialHandler=_s});var Es=b(xe=>{"use strict";var bs=xe&&xe.__awaiter||function(e,t,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(y){try{u(s.next(y))}catch(f){o(f)}}function l(y){try{u(s.throw(y))}catch(f){o(f)}}function u(y){y.done?i(y.value):n(y.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};Object.defineProperty(xe,"__esModule",{value:!0});xe.OidcClient=void 0;var Go=ms(),Jo=ws(),vs=Dt(),ve=class{static createHttpClient(t=!0,r=10){let s={allowRetries:t,maxRetries:r};return new Go.HttpClient("actions/oidc-client",[new Jo.BearerCredentialHandler(ve.getRequestToken())],s)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return bs(this,void 0,void 0,function*(){let i=(r=(yield ve.createHttpClient().getJson(t).catch(o=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${o.statusCode}
 
        Error Message: ${o.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!i)throw new Error("Response json body do not have ID Token field");return i})}static getIDToken(t){return bs(this,void 0,void 0,function*(){try{let r=ve.getIDTokenUrl();if(t){let n=encodeURIComponent(t);r=`${r}&audience=${n}`}vs.debug(`ID token url is ${r}`);let s=yield ve.getCall(r);return vs.setSecret(s),s}catch(r){throw new Error(`Error message: ${r.message}`)}})}};xe.OidcClient=ve});var Dt=b(R=>{"use strict";var Ko=R&&R.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),Yo=R&&R.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ss=R&&R.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Ko(t,e,r);return Yo(t,e),t},Ts=R&&R.__awaiter||function(e,t,r,s){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(y){try{u(s.next(y))}catch(f){o(f)}}function l(y){try{u(s.throw(y))}catch(f){o(f)}}function u(y){y.done?i(y.value):n(y.value).then(a,l)}u((s=s.apply(e,t||[])).next())})};Object.defineProperty(R,"__esModule",{value:!0});R.getIDToken=R.getState=R.saveState=R.group=R.endGroup=R.startGroup=R.info=R.notice=R.warning=R.error=R.debug=R.isDebug=R.setFailed=R.setCommandEcho=R.setOutput=R.getBooleanInput=R.getMultilineInput=R.getInput=R.addPath=R.setSecret=R.exportVariable=R.ExitCode=void 0;var Y=rs(),Rs=is(),ut=it(),lt=Ss(require("os")),Qo=Ss(require("path")),Xo=Es(),Os;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Os=R.ExitCode||(R.ExitCode={}));function Zo(e,t){let r=ut.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||""){let n="_GitHubActionsFileCommandDelimeter_",i=`${e}<<${n}${lt.EOL}${r}${lt.EOL}${n}`;Rs.issueCommand("ENV",i)}else Y.issueCommand("set-env",{name:e},r)}R.exportVariable=Zo;function ea(e){Y.issueCommand("add-mask",{},e)}R.setSecret=ea;function ta(e){process.env.GITHUB_PATH||""?Rs.issueCommand("PATH",e):Y.issueCommand("add-path",{},e),process.env.PATH=`${e}${Qo.delimiter}${process.env.PATH}`}R.addPath=ta;function $t(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}R.getInput=$t;function ra(e,t){return $t(e,t).split(`
`).filter(s=>s!=="")}R.getMultilineInput=ra;function sa(e,t){let r=["true","True","TRUE"],s=["false","False","FALSE"],n=$t(e,t);if(r.includes(n))return!0;if(s.includes(n))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}R.getBooleanInput=sa;function na(e,t){process.stdout.write(lt.EOL),Y.issueCommand("set-output",{name:e},t)}R.setOutput=na;function ia(e){Y.issue("echo",e?"on":"off")}R.setCommandEcho=ia;function oa(e){process.exitCode=Os.Failure,Ps(e)}R.setFailed=oa;function aa(){return process.env.RUNNER_DEBUG==="1"}R.isDebug=aa;function ca(e){Y.issueCommand("debug",{},e)}R.debug=ca;function Ps(e,t={}){Y.issueCommand("error",ut.toCommandProperties(t),e instanceof Error?e.toString():e)}R.error=Ps;function ua(e,t={}){Y.issueCommand("warning",ut.toCommandProperties(t),e instanceof Error?e.toString():e)}R.warning=ua;function la(e,t={}){Y.issueCommand("notice",ut.toCommandProperties(t),e instanceof Error?e.toString():e)}R.notice=la;function ha(e){process.stdout.write(e+lt.EOL)}R.info=ha;function As(e){Y.issue("group",e)}R.startGroup=As;function xs(){Y.issue("endgroup")}R.endGroup=xs;function fa(e,t){return Ts(this,void 0,void 0,function*(){As(e);let r;try{r=yield t()}finally{xs()}return r})}R.group=fa;function da(e,t){Y.issueCommand("save-state",{name:e},t)}R.saveState=da;function pa(e){return process.env[`STATE_${e}`]||""}R.getState=pa;function ma(e){return Ts(this,void 0,void 0,function*(){return yield Xo.OidcClient.getIDToken(e)})}R.getIDToken=ma});var ue=b((ce,ht)=>{"use strict";Object.defineProperty(ce,"__esModule",{value:!0});var Cs=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function ya(e){return Cs.includes(e)}var ga=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement",...Cs];function _a(e){return ga.includes(e)}var wa=["null","undefined","string","number","bigint","boolean","symbol"];function ba(e){return wa.includes(e)}function Ce(e){return t=>typeof t===e}var{toString:ks}=Object.prototype,Ve=e=>{let t=ks.call(e).slice(8,-1);if(/HTML\w+Element/.test(t)&&c.domElement(e))return"HTMLElement";if(_a(t))return t},j=e=>t=>Ve(t)===e;function c(e){if(e===null)return"null";switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(c.observable(e))return"Observable";if(c.array(e))return"Array";if(c.buffer(e))return"Buffer";let t=Ve(e);if(t)return t;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}c.undefined=Ce("undefined");c.string=Ce("string");var va=Ce("number");c.number=e=>va(e)&&!c.nan(e);c.bigint=Ce("bigint");c.function_=Ce("function");c.null_=e=>e===null;c.class_=e=>c.function_(e)&&e.toString().startsWith("class ");c.boolean=e=>e===!0||e===!1;c.symbol=Ce("symbol");c.numericString=e=>c.string(e)&&!c.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e));c.array=(e,t)=>Array.isArray(e)?c.function_(t)?e.every(t):!0:!1;c.buffer=e=>{var t,r,s,n;return(n=(s=(r=(t=e)===null||t===void 0?void 0:t.constructor)===null||r===void 0?void 0:r.isBuffer)===null||s===void 0?void 0:s.call(r,e))!==null&&n!==void 0?n:!1};c.nullOrUndefined=e=>c.null_(e)||c.undefined(e);c.object=e=>!c.null_(e)&&(typeof e=="object"||c.function_(e));c.iterable=e=>{var t;return c.function_((t=e)===null||t===void 0?void 0:t[Symbol.iterator])};c.asyncIterable=e=>{var t;return c.function_((t=e)===null||t===void 0?void 0:t[Symbol.asyncIterator])};c.generator=e=>c.iterable(e)&&c.function_(e.next)&&c.function_(e.throw);c.asyncGenerator=e=>c.asyncIterable(e)&&c.function_(e.next)&&c.function_(e.throw);c.nativePromise=e=>j("Promise")(e);var Ea=e=>{var t,r;return c.function_((t=e)===null||t===void 0?void 0:t.then)&&c.function_((r=e)===null||r===void 0?void 0:r.catch)};c.promise=e=>c.nativePromise(e)||Ea(e);c.generatorFunction=j("GeneratorFunction");c.asyncGeneratorFunction=e=>Ve(e)==="AsyncGeneratorFunction";c.asyncFunction=e=>Ve(e)==="AsyncFunction";c.boundFunction=e=>c.function_(e)&&!e.hasOwnProperty("prototype");c.regExp=j("RegExp");c.date=j("Date");c.error=j("Error");c.map=e=>j("Map")(e);c.set=e=>j("Set")(e);c.weakMap=e=>j("WeakMap")(e);c.weakSet=e=>j("WeakSet")(e);c.int8Array=j("Int8Array");c.uint8Array=j("Uint8Array");c.uint8ClampedArray=j("Uint8ClampedArray");c.int16Array=j("Int16Array");c.uint16Array=j("Uint16Array");c.int32Array=j("Int32Array");c.uint32Array=j("Uint32Array");c.float32Array=j("Float32Array");c.float64Array=j("Float64Array");c.bigInt64Array=j("BigInt64Array");c.bigUint64Array=j("BigUint64Array");c.arrayBuffer=j("ArrayBuffer");c.sharedArrayBuffer=j("SharedArrayBuffer");c.dataView=j("DataView");c.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype;c.urlInstance=e=>j("URL")(e);c.urlString=e=>{if(!c.string(e))return!1;try{return new URL(e),!0}catch{return!1}};c.truthy=e=>Boolean(e);c.falsy=e=>!e;c.nan=e=>Number.isNaN(e);c.primitive=e=>c.null_(e)||ba(typeof e);c.integer=e=>Number.isInteger(e);c.safeInteger=e=>Number.isSafeInteger(e);c.plainObject=e=>{if(ks.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||t===Object.getPrototypeOf({})};c.typedArray=e=>ya(Ve(e));var Sa=e=>c.safeInteger(e)&&e>=0;c.arrayLike=e=>!c.nullOrUndefined(e)&&!c.function_(e)&&Sa(e.length);c.inRange=(e,t)=>{if(c.number(t))return e>=Math.min(0,t)&&e<=Math.max(t,0);if(c.array(t)&&t.length===2)return e>=Math.min(...t)&&e<=Math.max(...t);throw new TypeError(`Invalid range: ${JSON.stringify(t)}`)};var Ta=1,Ra=["innerHTML","ownerDocument","style","attributes","nodeValue"];c.domElement=e=>c.object(e)&&e.nodeType===Ta&&c.string(e.nodeName)&&!c.plainObject(e)&&Ra.every(t=>t in e);c.observable=e=>{var t,r,s,n;return e?e===((r=(t=e)[Symbol.observable])===null||r===void 0?void 0:r.call(t))||e===((n=(s=e)["@@observable"])===null||n===void 0?void 0:n.call(s)):!1};c.nodeStream=e=>c.object(e)&&c.function_(e.pipe)&&!c.observable(e);c.infinite=e=>e===1/0||e===-1/0;var qs=e=>t=>c.integer(t)&&Math.abs(t%2)===e;c.evenInteger=qs(0);c.oddInteger=qs(1);c.emptyArray=e=>c.array(e)&&e.length===0;c.nonEmptyArray=e=>c.array(e)&&e.length>0;c.emptyString=e=>c.string(e)&&e.length===0;c.nonEmptyString=e=>c.string(e)&&e.length>0;var Oa=e=>c.string(e)&&!/\S/.test(e);c.emptyStringOrWhitespace=e=>c.emptyString(e)||Oa(e);c.emptyObject=e=>c.object(e)&&!c.map(e)&&!c.set(e)&&Object.keys(e).length===0;c.nonEmptyObject=e=>c.object(e)&&!c.map(e)&&!c.set(e)&&Object.keys(e).length>0;c.emptySet=e=>c.set(e)&&e.size===0;c.nonEmptySet=e=>c.set(e)&&e.size>0;c.emptyMap=e=>c.map(e)&&e.size===0;c.nonEmptyMap=e=>c.map(e)&&e.size>0;c.propertyKey=e=>c.any([c.string,c.number,c.symbol],e);c.formData=e=>j("FormData")(e);c.urlSearchParams=e=>j("URLSearchParams")(e);var js=(e,t,r)=>{if(!c.function_(t))throw new TypeError(`Invalid predicate: ${JSON.stringify(t)}`);if(r.length===0)throw new TypeError("Invalid number of values");return e.call(r,t)};c.any=(e,...t)=>(c.array(e)?e:[e]).some(s=>js(Array.prototype.some,s,t));c.all=(e,...t)=>js(Array.prototype.every,e,t);var _=(e,t,r,s={})=>{if(!e){let{multipleValues:n}=s,i=n?`received values of types ${[...new Set(r.map(o=>`\`${c(o)}\``))].join(", ")}`:`received value of type \`${c(r)}\``;throw new TypeError(`Expected value which is \`${t}\`, ${i}.`)}};ce.assert={undefined:e=>_(c.undefined(e),"undefined",e),string:e=>_(c.string(e),"string",e),number:e=>_(c.number(e),"number",e),bigint:e=>_(c.bigint(e),"bigint",e),function_:e=>_(c.function_(e),"Function",e),null_:e=>_(c.null_(e),"null",e),class_:e=>_(c.class_(e),"Class",e),boolean:e=>_(c.boolean(e),"boolean",e),symbol:e=>_(c.symbol(e),"symbol",e),numericString:e=>_(c.numericString(e),"string with a number",e),array:(e,t)=>{_(c.array(e),"Array",e),t&&e.forEach(t)},buffer:e=>_(c.buffer(e),"Buffer",e),nullOrUndefined:e=>_(c.nullOrUndefined(e),"null or undefined",e),object:e=>_(c.object(e),"Object",e),iterable:e=>_(c.iterable(e),"Iterable",e),asyncIterable:e=>_(c.asyncIterable(e),"AsyncIterable",e),generator:e=>_(c.generator(e),"Generator",e),asyncGenerator:e=>_(c.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>_(c.nativePromise(e),"native Promise",e),promise:e=>_(c.promise(e),"Promise",e),generatorFunction:e=>_(c.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>_(c.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>_(c.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>_(c.boundFunction(e),"Function",e),regExp:e=>_(c.regExp(e),"RegExp",e),date:e=>_(c.date(e),"Date",e),error:e=>_(c.error(e),"Error",e),map:e=>_(c.map(e),"Map",e),set:e=>_(c.set(e),"Set",e),weakMap:e=>_(c.weakMap(e),"WeakMap",e),weakSet:e=>_(c.weakSet(e),"WeakSet",e),int8Array:e=>_(c.int8Array(e),"Int8Array",e),uint8Array:e=>_(c.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>_(c.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>_(c.int16Array(e),"Int16Array",e),uint16Array:e=>_(c.uint16Array(e),"Uint16Array",e),int32Array:e=>_(c.int32Array(e),"Int32Array",e),uint32Array:e=>_(c.uint32Array(e),"Uint32Array",e),float32Array:e=>_(c.float32Array(e),"Float32Array",e),float64Array:e=>_(c.float64Array(e),"Float64Array",e),bigInt64Array:e=>_(c.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>_(c.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>_(c.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>_(c.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>_(c.dataView(e),"DataView",e),urlInstance:e=>_(c.urlInstance(e),"URL",e),urlString:e=>_(c.urlString(e),"string with a URL",e),truthy:e=>_(c.truthy(e),"truthy",e),falsy:e=>_(c.falsy(e),"falsy",e),nan:e=>_(c.nan(e),"NaN",e),primitive:e=>_(c.primitive(e),"primitive",e),integer:e=>_(c.integer(e),"integer",e),safeInteger:e=>_(c.safeInteger(e),"integer",e),plainObject:e=>_(c.plainObject(e),"plain object",e),typedArray:e=>_(c.typedArray(e),"TypedArray",e),arrayLike:e=>_(c.arrayLike(e),"array-like",e),domElement:e=>_(c.domElement(e),"HTMLElement",e),observable:e=>_(c.observable(e),"Observable",e),nodeStream:e=>_(c.nodeStream(e),"Node.js Stream",e),infinite:e=>_(c.infinite(e),"infinite number",e),emptyArray:e=>_(c.emptyArray(e),"empty array",e),nonEmptyArray:e=>_(c.nonEmptyArray(e),"non-empty array",e),emptyString:e=>_(c.emptyString(e),"empty string",e),nonEmptyString:e=>_(c.nonEmptyString(e),"non-empty string",e),emptyStringOrWhitespace:e=>_(c.emptyStringOrWhitespace(e),"empty string or whitespace",e),emptyObject:e=>_(c.emptyObject(e),"empty object",e),nonEmptyObject:e=>_(c.nonEmptyObject(e),"non-empty object",e),emptySet:e=>_(c.emptySet(e),"empty set",e),nonEmptySet:e=>_(c.nonEmptySet(e),"non-empty set",e),emptyMap:e=>_(c.emptyMap(e),"empty map",e),nonEmptyMap:e=>_(c.nonEmptyMap(e),"non-empty map",e),propertyKey:e=>_(c.propertyKey(e),"PropertyKey",e),formData:e=>_(c.formData(e),"FormData",e),urlSearchParams:e=>_(c.urlSearchParams(e),"URLSearchParams",e),evenInteger:e=>_(c.evenInteger(e),"even integer",e),oddInteger:e=>_(c.oddInteger(e),"odd integer",e),directInstanceOf:(e,t)=>_(c.directInstanceOf(e,t),"T",e),inRange:(e,t)=>_(c.inRange(e,t),"in range",e),any:(e,...t)=>_(c.any(e,...t),"predicate returns truthy for any value",t,{multipleValues:!0}),all:(e,...t)=>_(c.all(e,...t),"predicate returns truthy for all values",t,{multipleValues:!0})};Object.defineProperties(c,{class:{value:c.class_},function:{value:c.function_},null:{value:c.null_}});Object.defineProperties(ce.assert,{class:{value:ce.assert.class_},function:{value:ce.assert.function_},null:{value:ce.assert.null_}});ce.default=c;ht.exports=c;ht.exports.default=c;ht.exports.assert=ce.assert});var Ms=b((Dl,Ut)=>{"use strict";var It=class extends Error{constructor(t){super(t||"Promise was canceled");this.name="CancelError"}get isCanceled(){return!0}},We=class{static fn(t){return(...r)=>new We((s,n,i)=>{r.push(i),t(...r).then(s,n)})}constructor(t){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((r,s)=>{this._reject=s;let n=a=>{(!this._isCanceled||!o.shouldReject)&&(this._isPending=!1,r(a))},i=a=>{this._isPending=!1,s(a)},o=a=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(a)};return Object.defineProperties(o,{shouldReject:{get:()=>this._rejectOnCancel,set:a=>{this._rejectOnCancel=a}}}),t(n,i,o)})}then(t,r){return this._promise.then(t,r)}catch(t){return this._promise.catch(t)}finally(t){return this._promise.finally(t)}cancel(t){if(!(!this._isPending||this._isCanceled)){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(let r of this._cancelHandlers)r()}catch(r){this._reject(r);return}this._rejectOnCancel&&this._reject(new It(t))}}get isCanceled(){return this._isCanceled}};Object.setPrototypeOf(We.prototype,Promise.prototype);Ut.exports=We;Ut.exports.CancelError=It});var Ds=b((Ht,Nt)=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});function Pa(e){return e.encrypted}var Lt=(e,t)=>{let r;typeof t=="function"?r={connect:t}:r=t;let s=typeof r.connect=="function",n=typeof r.secureConnect=="function",i=typeof r.close=="function",o=()=>{s&&r.connect(),Pa(e)&&n&&(e.authorized?r.secureConnect():e.authorizationError||e.once("secureConnect",r.secureConnect)),i&&e.once("close",r.close)};e.writable&&!e.connecting?o():e.connecting?e.once("connect",o):e.destroyed&&i&&r.close(e._hadError)};Ht.default=Lt;Nt.exports=Lt;Nt.exports.default=Lt});var $s=b((zt,Ft)=>{"use strict";Object.defineProperty(zt,"__esModule",{value:!0});var Aa=Ds(),xa=require("util"),Ca=Number(process.versions.node.split(".")[0]),Bt=e=>{if(e.timings)return e.timings;let t={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};e.timings=t;let r=a=>{let l=a.emit.bind(a);a.emit=(u,...y)=>(u==="error"&&(t.error=Date.now(),t.phases.total=t.error-t.start,a.emit=l),l(u,...y))};r(e);let s=()=>{t.abort=Date.now(),(!t.response||Ca>=13)&&(t.phases.total=Date.now()-t.start)};e.prependOnceListener("abort",s);let n=a=>{if(t.socket=Date.now(),t.phases.wait=t.socket-t.start,xa.types.isProxy(a))return;let l=()=>{t.lookup=Date.now(),t.phases.dns=t.lookup-t.socket};a.prependOnceListener("lookup",l),Aa.default(a,{connect:()=>{t.connect=Date.now(),t.lookup===void 0&&(a.removeListener("lookup",l),t.lookup=t.connect,t.phases.dns=t.lookup-t.socket),t.phases.tcp=t.connect-t.lookup},secureConnect:()=>{t.secureConnect=Date.now(),t.phases.tls=t.secureConnect-t.connect}})};e.socket?n(e.socket):e.prependOnceListener("socket",n);let i=()=>{var a;t.upload=Date.now(),t.phases.request=t.upload-((a=t.secureConnect)!==null&&a!==void 0?a:t.connect)};return(()=>typeof e.writableFinished=="boolean"?e.writableFinished:e.finished&&e.outputSize===0&&(!e.socket||e.socket.writableLength===0))()?i():e.prependOnceListener("finish",i),e.prependOnceListener("response",a=>{t.response=Date.now(),t.phases.firstByte=t.response-t.upload,a.timings=t,r(a),a.prependOnceListener("end",()=>{t.end=Date.now(),t.phases.download=t.end-t.response,t.phases.total=t.end-t.start}),a.prependOnceListener("aborted",s)}),t};zt.default=Bt;Ft.exports=Bt;Ft.exports.default=Bt});var zs=b(($l,Jt)=>{"use strict";var{V4MAPPED:ka,ADDRCONFIG:qa,ALL:Is,promises:{Resolver:Us},lookup:ja}=require("dns"),{promisify:Vt}=require("util"),Ma=require("os"),ke=Symbol("cacheableLookupCreateConnection"),Wt=Symbol("cacheableLookupInstance"),Ls=Symbol("expires"),Da=typeof Is=="number",Hs=e=>{if(!(e&&typeof e.createConnection=="function"))throw new Error("Expected an Agent instance as the first argument")},$a=e=>{for(let t of e)t.family!==6&&(t.address=`::ffff:${t.address}`,t.family=6)},Ns=()=>{let e=!1,t=!1;for(let r of Object.values(Ma.networkInterfaces()))for(let s of r)if(!s.internal&&(s.family==="IPv6"?t=!0:e=!0,e&&t))return{has4:e,has6:t};return{has4:e,has6:t}},Ia=e=>Symbol.iterator in e,Bs={ttl:!0},Ua={all:!0},Gt=class{constructor({cache:t=new Map,maxTtl:r=1/0,fallbackDuration:s=3600,errorTtl:n=.15,resolver:i=new Us,lookup:o=ja}={}){if(this.maxTtl=r,this.errorTtl=n,this._cache=t,this._resolver=i,this._dnsLookup=Vt(o),this._resolver instanceof Us?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=Vt(this._resolver.resolve4.bind(this._resolver)),this._resolve6=Vt(this._resolver.resolve6.bind(this._resolver))),this._iface=Ns(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,s<1)this._fallback=!1;else{this._fallback=!0;let a=setInterval(()=>{this._hostnamesToFallback.clear()},s*1e3);a.unref&&a.unref()}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(t){this.clear(),this._resolver.setServers(t)}get servers(){return this._resolver.getServers()}lookup(t,r,s){if(typeof r=="function"?(s=r,r={}):typeof r=="number"&&(r={family:r}),!s)throw new Error("Callback must be a function.");this.lookupAsync(t,r).then(n=>{r.all?s(null,n):s(null,n.address,n.family,n.expires,n.ttl)},s)}async lookupAsync(t,r={}){typeof r=="number"&&(r={family:r});let s=await this.query(t);if(r.family===6){let n=s.filter(i=>i.family===6);r.hints&ka&&(Da&&r.hints&Is||n.length===0)?$a(s):s=n}else r.family===4&&(s=s.filter(n=>n.family===4));if(r.hints&qa){let{_iface:n}=this;s=s.filter(i=>i.family===6?n.has6:n.has4)}if(s.length===0){let n=new Error(`cacheableLookup ENOTFOUND ${t}`);throw n.code="ENOTFOUND",n.hostname=t,n}return r.all?s:s[0]}async query(t){let r=await this._cache.get(t);if(!r){let s=this._pending[t];if(s)r=await s;else{let n=this.queryAndCache(t);this._pending[t]=n;try{r=await n}finally{delete this._pending[t]}}}return r=r.map(s=>({...s})),r}async _resolve(t){let r=async u=>{try{return await u}catch(y){if(y.code==="ENODATA"||y.code==="ENOTFOUND")return[];throw y}},[s,n]=await Promise.all([this._resolve4(t,Bs),this._resolve6(t,Bs)].map(u=>r(u))),i=0,o=0,a=0,l=Date.now();for(let u of s)u.family=4,u.expires=l+u.ttl*1e3,i=Math.max(i,u.ttl);for(let u of n)u.family=6,u.expires=l+u.ttl*1e3,o=Math.max(o,u.ttl);return s.length>0?n.length>0?a=Math.min(i,o):a=i:a=o,{entries:[...s,...n],cacheTtl:a}}async _lookup(t){try{return{entries:await this._dnsLookup(t,{all:!0}),cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(t,r,s){if(this.maxTtl>0&&s>0){s=Math.min(s,this.maxTtl)*1e3,r[Ls]=Date.now()+s;try{await this._cache.set(t,r,s)}catch(n){this.lookupAsync=async()=>{let i=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw i.cause=n,i}}Ia(this._cache)&&this._tick(s)}}async queryAndCache(t){if(this._hostnamesToFallback.has(t))return this._dnsLookup(t,Ua);let r=await this._resolve(t);r.entries.length===0&&this._fallback&&(r=await this._lookup(t),r.entries.length!==0&&this._hostnamesToFallback.add(t));let s=r.entries.length===0?this.errorTtl:r.cacheTtl;return await this._set(t,r.entries,s),r.entries}_tick(t){let r=this._nextRemovalTime;(!r||t<r)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=t,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let s=1/0,n=Date.now();for(let[i,o]of this._cache){let a=o[Ls];n>=a?this._cache.delete(i):a<s&&(s=a)}s!==1/0&&this._tick(s-n)},t),this._removalTimeout.unref&&this._removalTimeout.unref())}install(t){if(Hs(t),ke in t)throw new Error("CacheableLookup has been already installed");t[ke]=t.createConnection,t[Wt]=this,t.createConnection=(r,s)=>("lookup"in r||(r.lookup=this.lookup),t[ke](r,s))}uninstall(t){if(Hs(t),t[ke]){if(t[Wt]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");t.createConnection=t[ke],delete t[ke],delete t[Wt]}}updateInterfaceInfo(){let{_iface:t}=this;this._iface=Ns(),(t.has4&&!this._iface.has4||t.has6&&!this._iface.has6)&&this._cache.clear()}clear(t){if(t){this._cache.delete(t);return}this._cache.clear()}};Jt.exports=Gt;Jt.exports.default=Gt});var Ws=b((Il,Vs)=>{"use strict";var La="text/plain",Ha="us-ascii",Fs=(e,t)=>t.some(r=>r instanceof RegExp?r.test(e):r===e),Na=(e,{stripHash:t})=>{let r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error(`Invalid URL: ${e}`);let{type:s,data:n,hash:i}=r.groups,o=s.split(";");i=t?"":i;let a=!1;o[o.length-1]==="base64"&&(o.pop(),a=!0);let l=(o.shift()||"").toLowerCase(),y=[...o.map(f=>{let[d,m=""]=f.split("=").map(g=>g.trim());return d==="charset"&&(m=m.toLowerCase(),m===Ha)?"":`${d}${m?`=${m}`:""}`}).filter(Boolean)];return a&&y.push("base64"),(y.length!==0||l&&l!==La)&&y.unshift(l),`data:${y.join(";")},${a?n.trim():n}${i?`#${i}`:""}`},Ba=(e,t)=>{if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return Na(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));let n=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&n.protocol==="https:"&&(n.protocol="http:"),t.forceHttps&&n.protocol==="http:"&&(n.protocol="https:"),t.stripAuthentication&&(n.username="",n.password=""),t.stripHash?n.hash="":t.stripTextFragment&&(n.hash=n.hash.replace(/#?:~:text.*?$/i,"")),n.pathname&&(n.pathname=n.pathname.replace(/(?<!\b(?:[a-z][a-z\d+\-.]{1,50}:))\/{2,}/g,"/")),n.pathname)try{n.pathname=decodeURI(n.pathname)}catch{}if(t.removeDirectoryIndex===!0&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let o=n.pathname.split("/"),a=o[o.length-1];Fs(a,t.removeDirectoryIndex)&&(o=o.slice(0,o.length-1),n.pathname=o.slice(1).join("/")+"/")}if(n.hostname&&(n.hostname=n.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)(?:[a-z\-\d]{1,63})\.(?:[a-z.\-\d]{2,63})$/.test(n.hostname)&&(n.hostname=n.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(let o of[...n.searchParams.keys()])Fs(o,t.removeQueryParameters)&&n.searchParams.delete(o);t.removeQueryParameters===!0&&(n.search=""),t.sortQueryParameters&&n.searchParams.sort(),t.removeTrailingSlash&&(n.pathname=n.pathname.replace(/\/$/,""));let i=e;return e=n.toString(),!t.removeSingleSlash&&n.pathname==="/"&&!i.endsWith("/")&&n.hash===""&&(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||n.pathname==="/")&&n.hash===""&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e};Vs.exports=Ba});var Ks=b((Ul,Js)=>{Js.exports=Gs;function Gs(e,t){if(e&&t)return Gs(e)(t);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(s){r[s]=e[s]}),r;function r(){for(var s=new Array(arguments.length),n=0;n<s.length;n++)s[n]=arguments[n];var i=e.apply(this,s),o=s[s.length-1];return typeof i=="function"&&i!==o&&Object.keys(o).forEach(function(a){i[a]=o[a]}),i}}});var Yt=b((Ll,Kt)=>{var Ys=Ks();Kt.exports=Ys(ft);Kt.exports.strict=Ys(Qs);ft.proto=ft(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return ft(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Qs(this)},configurable:!0})});function ft(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function Qs(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}});var en=b((Hl,Zs)=>{var za=Yt(),Fa=function(){},Va=function(e){return e.setHeader&&typeof e.abort=="function"},Wa=function(e){return e.stdio&&Array.isArray(e.stdio)&&e.stdio.length===3},Xs=function(e,t,r){if(typeof t=="function")return Xs(e,null,t);t||(t={}),r=za(r||Fa);var s=e._writableState,n=e._readableState,i=t.readable||t.readable!==!1&&e.readable,o=t.writable||t.writable!==!1&&e.writable,a=!1,l=function(){e.writable||u()},u=function(){o=!1,i||r.call(e)},y=function(){i=!1,o||r.call(e)},f=function(p){r.call(e,p?new Error("exited with error code: "+p):null)},d=function(p){r.call(e,p)},m=function(){process.nextTick(g)},g=function(){if(!a){if(i&&!(n&&n.ended&&!n.destroyed))return r.call(e,new Error("premature close"));if(o&&!(s&&s.ended&&!s.destroyed))return r.call(e,new Error("premature close"))}},v=function(){e.req.on("finish",u)};return Va(e)?(e.on("complete",u),e.on("abort",m),e.req?v():e.on("request",v)):o&&!s&&(e.on("end",l),e.on("close",l)),Wa(e)&&e.on("exit",f),e.on("end",y),e.on("finish",u),t.error!==!1&&e.on("error",d),e.on("close",m),function(){a=!0,e.removeListener("complete",u),e.removeListener("abort",m),e.removeListener("request",v),e.req&&e.req.removeListener("finish",u),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",u),e.removeListener("exit",f),e.removeListener("end",y),e.removeListener("error",d),e.removeListener("close",m)}};Zs.exports=Xs});var sn=b((Nl,rn)=>{var Ga=Yt(),Ja=en(),Qt=require("fs"),Ge=function(){},Ka=/^v?\.0/.test(process.version),dt=function(e){return typeof e=="function"},Ya=function(e){return!Ka||!Qt?!1:(e instanceof(Qt.ReadStream||Ge)||e instanceof(Qt.WriteStream||Ge))&&dt(e.close)},Qa=function(e){return e.setHeader&&dt(e.abort)},Xa=function(e,t,r,s){s=Ga(s);var n=!1;e.on("close",function(){n=!0}),Ja(e,{readable:t,writable:r},function(o){if(o)return s(o);n=!0,s()});var i=!1;return function(o){if(!n&&!i){if(i=!0,Ya(e))return e.close(Ge);if(Qa(e))return e.abort();if(dt(e.destroy))return e.destroy();s(o||new Error("stream was destroyed"))}}},tn=function(e){e()},Za=function(e,t){return e.pipe(t)},ec=function(){var e=Array.prototype.slice.call(arguments),t=dt(e[e.length-1]||Ge)&&e.pop()||Ge;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var r,s=e.map(function(n,i){var o=i<e.length-1,a=i>0;return Xa(n,o,a,function(l){r||(r=l),l&&s.forEach(tn),!o&&(s.forEach(tn),t(r))})});return e.reduce(Za)};rn.exports=ec});var on=b((Bl,nn)=>{"use strict";var{PassThrough:tc}=require("stream");nn.exports=e=>{e={...e};let{array:t}=e,{encoding:r}=e,s=r==="buffer",n=!1;t?n=!(r||s):r=r||"utf8",s&&(r=null);let i=new tc({objectMode:n});r&&i.setEncoding(r);let o=0,a=[];return i.on("data",l=>{a.push(l),n?o=a.length:o+=l.length}),i.getBufferedValue=()=>t?a:s?Buffer.concat(a,o):a.join(""),i.getBufferedLength=()=>o,i}});var an=b((zl,qe)=>{"use strict";var{constants:rc}=require("buffer"),sc=sn(),nc=on(),Xt=class extends Error{constructor(){super("maxBuffer exceeded");this.name="MaxBufferError"}};async function pt(e,t){if(!e)return Promise.reject(new Error("Expected a stream"));t={maxBuffer:1/0,...t};let{maxBuffer:r}=t,s;return await new Promise((n,i)=>{let o=a=>{a&&s.getBufferedLength()<=rc.MAX_LENGTH&&(a.bufferedData=s.getBufferedValue()),i(a)};s=sc(e,nc(t),a=>{if(a){o(a);return}n()}),s.on("data",()=>{s.getBufferedLength()>r&&o(new Xt)})}),s.getBufferedValue()}qe.exports=pt;qe.exports.default=pt;qe.exports.buffer=(e,t)=>pt(e,{...t,encoding:"buffer"});qe.exports.array=(e,t)=>pt(e,{...t,array:!0});qe.exports.MaxBufferError=Xt});var un=b((Vl,cn)=>{"use strict";var ic=new Set([200,203,204,206,300,301,404,405,410,414,501]),oc=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),ac=new Set([500,502,503,504]),cc={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},uc={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function Ee(e){let t=parseInt(e,10);return isFinite(t)?t:0}function lc(e){return e?ac.has(e.status):!0}function Zt(e){let t={};if(!e)return t;let r=e.trim().split(/\s*,\s*/);for(let s of r){let[n,i]=s.split(/\s*=\s*/,2);t[n]=i===void 0?!0:i.replace(/^"|"$/g,"")}return t}function hc(e){let t=[];for(let r in e){let s=e[r];t.push(s===!0?r:r+"="+s)}if(!!t.length)return t.join(", ")}cn.exports=class{constructor(t,r,{shared:s,cacheHeuristic:n,immutableMinTimeToLive:i,ignoreCargoCult:o,_fromObject:a}={}){if(a){this._fromObject(a);return}if(!r||!r.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(t),this._responseTime=this.now(),this._isShared=s!==!1,this._cacheHeuristic=n!==void 0?n:.1,this._immutableMinTtl=i!==void 0?i:24*3600*1e3,this._status="status"in r?r.status:200,this._resHeaders=r.headers,this._rescc=Zt(r.headers["cache-control"]),this._method="method"in t?t.method:"GET",this._url=t.url,this._host=t.headers.host,this._noAuthorization=!t.headers.authorization,this._reqHeaders=r.headers.vary?t.headers:null,this._reqcc=Zt(t.headers["cache-control"]),o&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":hc(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),r.headers["cache-control"]==null&&/no-cache/.test(r.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&oc.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||ic.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(t){if(!t||!t.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(t){this._assertRequestHasHeaders(t);let r=Zt(t.headers["cache-control"]);return r["no-cache"]||/no-cache/.test(t.headers.pragma)||r["max-age"]&&this.age()>r["max-age"]||r["min-fresh"]&&this.timeToLive()<1e3*r["min-fresh"]||this.stale()&&!(r["max-stale"]&&!this._rescc["must-revalidate"]&&(r["max-stale"]===!0||r["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(t,!1)}_requestMatches(t,r){return(!this._url||this._url===t.url)&&this._host===t.headers.host&&(!t.method||this._method===t.method||r&&t.method==="HEAD")&&this._varyMatches(t)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(t){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let r=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let s of r)if(t.headers[s]!==this._reqHeaders[s])return!1;return!0}_copyWithoutHopByHopHeaders(t){let r={};for(let s in t)cc[s]||(r[s]=t[s]);if(t.connection){let s=t.connection.trim().split(/\s*,\s*/);for(let n of s)delete r[n]}if(r.warning){let s=r.warning.split(/,/).filter(n=>!/^\s*1[0-9][0-9]/.test(n));s.length?r.warning=s.join(",").trim():delete r.warning}return r}responseHeaders(){let t=this._copyWithoutHopByHopHeaders(this._resHeaders),r=this.age();return r>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(t.warning=(t.warning?`${t.warning}, `:"")+'113 - "rfc7234 5.5.4"'),t.age=`${Math.round(r)}`,t.date=new Date(this.now()).toUTCString(),t}date(){let t=Date.parse(this._resHeaders.date);return isFinite(t)?t:this._responseTime}age(){let t=this._ageValue(),r=(this.now()-this._responseTime)/1e3;return t+r}_ageValue(){return Ee(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return Ee(this._rescc["s-maxage"])}if(this._rescc["max-age"])return Ee(this._rescc["max-age"]);let t=this._rescc.immutable?this._immutableMinTtl:0,r=this.date();if(this._resHeaders.expires){let s=Date.parse(this._resHeaders.expires);return Number.isNaN(s)||s<r?0:Math.max(t,(s-r)/1e3)}if(this._resHeaders["last-modified"]){let s=Date.parse(this._resHeaders["last-modified"]);if(isFinite(s)&&r>s)return Math.max(t,(r-s)/1e3*this._cacheHeuristic)}return t}timeToLive(){let t=this.maxAge()-this.age(),r=t+Ee(this._rescc["stale-if-error"]),s=t+Ee(this._rescc["stale-while-revalidate"]);return Math.max(0,t,r,s)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+Ee(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+Ee(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(t){return new this(void 0,void 0,{_fromObject:t})}_fromObject(t){if(this._responseTime)throw Error("Reinitialized");if(!t||t.v!==1)throw Error("Invalid serialization");this._responseTime=t.t,this._isShared=t.sh,this._cacheHeuristic=t.ch,this._immutableMinTtl=t.imm!==void 0?t.imm:24*3600*1e3,this._status=t.st,this._resHeaders=t.resh,this._rescc=t.rescc,this._method=t.m,this._url=t.u,this._host=t.h,this._noAuthorization=t.a,this._reqHeaders=t.reqh,this._reqcc=t.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(t){this._assertRequestHasHeaders(t);let r=this._copyWithoutHopByHopHeaders(t.headers);if(delete r["if-range"],!this._requestMatches(t,!0)||!this.storable())return delete r["if-none-match"],delete r["if-modified-since"],r;if(this._resHeaders.etag&&(r["if-none-match"]=r["if-none-match"]?`${r["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),r["accept-ranges"]||r["if-match"]||r["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete r["if-modified-since"],r["if-none-match"]){let n=r["if-none-match"].split(/,/).filter(i=>!/^\s*W\//.test(i));n.length?r["if-none-match"]=n.join(",").trim():delete r["if-none-match"]}}else this._resHeaders["last-modified"]&&!r["if-modified-since"]&&(r["if-modified-since"]=this._resHeaders["last-modified"]);return r}revalidatedPolicy(t,r){if(this._assertRequestHasHeaders(t),this._useStaleIfError()&&lc(r))return{modified:!1,matches:!1,policy:this};if(!r||!r.headers)throw Error("Response headers missing");let s=!1;if(r.status!==void 0&&r.status!=304?s=!1:r.headers.etag&&!/^\s*W\//.test(r.headers.etag)?s=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag:this._resHeaders.etag&&r.headers.etag?s=this._resHeaders.etag.replace(/^\s*W\//,"")===r.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?s=this._resHeaders["last-modified"]===r.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!r.headers.etag&&!r.headers["last-modified"]&&(s=!0),!s)return{policy:new this.constructor(t,r),modified:r.status!=304,matches:!1};let n={};for(let o in this._resHeaders)n[o]=o in r.headers&&!uc[o]?r.headers[o]:this._resHeaders[o];let i=Object.assign({},r,{status:this._status,method:this._method,headers:n});return{policy:new this.constructor(t,i,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var mt=b((Wl,ln)=>{"use strict";ln.exports=e=>{let t={};for(let[r,s]of Object.entries(e))t[r.toLowerCase()]=s;return t}});var dn=b((Gl,fn)=>{"use strict";var fc=require("stream").Readable,dc=mt(),hn=class extends fc{constructor(t,r,s,n){if(typeof t!="number")throw new TypeError("Argument `statusCode` should be a number");if(typeof r!="object")throw new TypeError("Argument `headers` should be an object");if(!(s instanceof Buffer))throw new TypeError("Argument `body` should be a buffer");if(typeof n!="string")throw new TypeError("Argument `url` should be a string");super();this.statusCode=t,this.headers=dc(r),this.body=s,this.url=n}_read(){this.push(this.body),this.push(null)}};fn.exports=hn});var mn=b((Jl,pn)=>{"use strict";var pc=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];pn.exports=(e,t)=>{let r=new Set(Object.keys(e).concat(pc));for(let s of r)s in t||(t[s]=typeof e[s]=="function"?e[s].bind(e):e[s])}});var gn=b((Kl,yn)=>{"use strict";var mc=require("stream").PassThrough,yc=mn(),gc=e=>{if(!(e&&e.pipe))throw new TypeError("Parameter `response` must be a response stream.");let t=new mc;return yc(e,t),e.pipe(t)};yn.exports=gc});var _n=b(er=>{er.stringify=function e(t){if(typeof t=="undefined")return t;if(t&&Buffer.isBuffer(t))return JSON.stringify(":base64:"+t.toString("base64"));if(t&&t.toJSON&&(t=t.toJSON()),t&&typeof t=="object"){var r="",s=Array.isArray(t);r=s?"[":"{";var n=!0;for(var i in t){var o=typeof t[i]=="function"||!s&&typeof t[i]=="undefined";Object.hasOwnProperty.call(t,i)&&!o&&(n||(r+=","),n=!1,s?t[i]==null?r+="null":r+=e(t[i]):t[i]!==void 0&&(r+=e(i)+":"+e(t[i])))}return r+=s?"]":"}",r}else return typeof t=="string"?JSON.stringify(/^:/.test(t)?":"+t:t):typeof t=="undefined"?"null":JSON.stringify(t)};er.parse=function(e){return JSON.parse(e,function(t,r){return typeof r=="string"?/^:base64:/.test(r)?Buffer.from(r.substring(8),"base64"):/^:/.test(r)?r.substring(1):r:r})}});var En=b((Ql,vn)=>{"use strict";var _c=require("events"),wn=_n(),wc=e=>{let t={redis:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql"};if(e.adapter||e.uri){let r=e.adapter||/^[^:]*/.exec(e.uri)[0];return new(require(t[r]))(e)}return new Map},bn=class extends _c{constructor(t,r){super();if(this.opts=Object.assign({namespace:"keyv",serialize:wn.stringify,deserialize:wn.parse},typeof t=="string"?{uri:t}:t,r),!this.opts.store){let s=Object.assign({},this.opts);this.opts.store=wc(s)}typeof this.opts.store.on=="function"&&this.opts.store.on("error",s=>this.emit("error",s)),this.opts.store.namespace=this.opts.namespace}_getKeyPrefix(t){return`${this.opts.namespace}:${t}`}get(t,r){let s=this._getKeyPrefix(t),{store:n}=this.opts;return Promise.resolve().then(()=>n.get(s)).then(i=>typeof i=="string"?this.opts.deserialize(i):i).then(i=>{if(i!==void 0){if(typeof i.expires=="number"&&Date.now()>i.expires){this.delete(t);return}return r&&r.raw?i:i.value}})}set(t,r,s){let n=this._getKeyPrefix(t);typeof s=="undefined"&&(s=this.opts.ttl),s===0&&(s=void 0);let{store:i}=this.opts;return Promise.resolve().then(()=>{let o=typeof s=="number"?Date.now()+s:null;return r={value:r,expires:o},this.opts.serialize(r)}).then(o=>i.set(n,o,s)).then(()=>!0)}delete(t){let r=this._getKeyPrefix(t),{store:s}=this.opts;return Promise.resolve().then(()=>s.delete(r))}clear(){let{store:t}=this.opts;return Promise.resolve().then(()=>t.clear())}};vn.exports=bn});var Rn=b((Xl,Tn)=>{"use strict";var bc=require("events"),yt=require("url"),vc=Ws(),Ec=an(),tr=un(),Sn=dn(),Sc=mt(),Tc=gn(),Rc=En(),ie=class{constructor(t,r){if(typeof t!="function")throw new TypeError("Parameter `request` must be a function");return this.cache=new Rc({uri:typeof r=="string"&&r,store:typeof r!="string"&&r,namespace:"cacheable-request"}),this.createCacheableRequest(t)}createCacheableRequest(t){return(r,s)=>{let n;if(typeof r=="string")n=rr(yt.parse(r)),r={};else if(r instanceof yt.URL)n=rr(yt.parse(r.toString())),r={};else{let[f,...d]=(r.path||"").split("?"),m=d.length>0?`?${d.join("?")}`:"";n=rr({...r,pathname:f,search:m})}r={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...r,...Oc(n)},r.headers=Sc(r.headers);let i=new bc,o=vc(yt.format(n),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),a=`${r.method}:${o}`,l=!1,u=!1,y=f=>{u=!0;let d=!1,m,g=new Promise(p=>{m=()=>{d||(d=!0,p())}}),v=p=>{if(l&&!f.forceRefresh){p.status=p.statusCode;let q=tr.fromObject(l.cachePolicy).revalidatedPolicy(f,p);if(!q.modified){let U=q.policy.responseHeaders();p=new Sn(l.statusCode,U,l.body,l.url),p.cachePolicy=q.policy,p.fromCache=!0}}p.fromCache||(p.cachePolicy=new tr(f,p,f),p.fromCache=!1);let E;f.cache&&p.cachePolicy.storable()?(E=Tc(p),(async()=>{try{let q=Ec.buffer(p);if(await Promise.race([g,new Promise(fe=>p.once("end",fe))]),d)return;let U=await q,N={cachePolicy:p.cachePolicy.toObject(),url:p.url,statusCode:p.fromCache?l.statusCode:p.statusCode,body:U},se=f.strictTtl?p.cachePolicy.timeToLive():void 0;f.maxTtl&&(se=se?Math.min(se,f.maxTtl):f.maxTtl),await this.cache.set(a,N,se)}catch(q){i.emit("error",new ie.CacheError(q))}})()):f.cache&&l&&(async()=>{try{await this.cache.delete(a)}catch(q){i.emit("error",new ie.CacheError(q))}})(),i.emit("response",E||p),typeof s=="function"&&s(E||p)};try{let p=t(f,v);p.once("error",m),p.once("abort",m),i.emit("request",p)}catch(p){i.emit("error",new ie.RequestError(p))}};return(async()=>{let f=async m=>{await Promise.resolve();let g=m.cache?await this.cache.get(a):void 0;if(typeof g=="undefined")return y(m);let v=tr.fromObject(g.cachePolicy);if(v.satisfiesWithoutRevalidation(m)&&!m.forceRefresh){let p=v.responseHeaders(),E=new Sn(g.statusCode,p,g.body,g.url);E.cachePolicy=v,E.fromCache=!0,i.emit("response",E),typeof s=="function"&&s(E)}else l=g,m.headers=v.revalidationHeaders(m),y(m)},d=m=>i.emit("error",new ie.CacheError(m));this.cache.once("error",d),i.on("response",()=>this.cache.removeListener("error",d));try{await f(r)}catch(m){r.automaticFailover&&!u&&y(r),i.emit("error",new ie.CacheError(m))}})(),i}}};function Oc(e){let t={...e};return t.path=`${e.pathname||"/"}${e.search||""}`,delete t.pathname,delete t.search,t}function rr(e){return{protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search}}ie.RequestError=class extends Error{constructor(e){super(e.message);this.name="RequestError",Object.assign(this,e)}};ie.CacheError=class extends Error{constructor(e){super(e.message);this.name="CacheError",Object.assign(this,e)}};Tn.exports=ie});var Pn=b((Zl,On)=>{"use strict";var Pc=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];On.exports=(e,t)=>{if(t._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");let r=new Set(Object.keys(e).concat(Pc)),s={};for(let n of r)n in t||(s[n]={get(){let i=e[n];return typeof i=="function"?i.bind(e):i},set(i){e[n]=i},enumerable:!0,configurable:!1});return Object.defineProperties(t,s),e.once("aborted",()=>{t.destroy(),t.emit("aborted")}),e.once("close",()=>{e.complete&&t.readable?t.once("end",()=>{t.emit("close")}):t.emit("close")}),t}});var xn=b((eh,An)=>{"use strict";var{Transform:Ac,PassThrough:xc}=require("stream"),sr=require("zlib"),Cc=Pn();An.exports=e=>{let t=(e.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(t))return e;let r=t==="br";if(r&&typeof sr.createBrotliDecompress!="function")return e.destroy(new Error("Brotli is not supported on Node.js < 12")),e;let s=!0,n=new Ac({transform(a,l,u){s=!1,u(null,a)},flush(a){a()}}),i=new xc({autoDestroy:!1,destroy(a,l){e.destroy(),l(a)}}),o=r?sr.createBrotliDecompress():sr.createUnzip();return o.once("error",a=>{if(s&&!e.readable){i.end();return}i.destroy(a)}),Cc(e,i),e.pipe(n).pipe(o).pipe(i),i}});var nr=b((th,kn)=>{"use strict";var Cn=class{constructor(t={}){if(!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=t.maxSize,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(t,r){if(this.cache.set(t,r),this._size++,this._size>=this.maxSize){if(this._size=0,typeof this.onEviction=="function")for(let[s,n]of this.oldCache.entries())this.onEviction(s,n);this.oldCache=this.cache,this.cache=new Map}}get(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t)){let r=this.oldCache.get(t);return this.oldCache.delete(t),this._set(t,r),r}}set(t,r){return this.cache.has(t)?this.cache.set(t,r):this._set(t,r),this}has(t){return this.cache.has(t)||this.oldCache.has(t)}peek(t){if(this.cache.has(t))return this.cache.get(t);if(this.oldCache.has(t))return this.oldCache.get(t)}delete(t){let r=this.cache.delete(t);return r&&this._size--,this.oldCache.delete(t)||r}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(let[t]of this)yield t}*values(){for(let[,t]of this)yield t}*[Symbol.iterator](){for(let t of this.cache)yield t;for(let t of this.oldCache){let[r]=t;this.cache.has(r)||(yield t)}}get size(){let t=0;for(let r of this.oldCache.keys())this.cache.has(r)||t++;return Math.min(this._size+t,this.maxSize)}};kn.exports=Cn});var or=b((rh,Dn)=>{"use strict";var kc=require("events"),qc=require("tls"),jc=require("http2"),Mc=nr(),W=Symbol("currentStreamsCount"),qn=Symbol("request"),Q=Symbol("cachedOriginSet"),je=Symbol("gracefullyClosing"),Dc=["maxDeflateDynamicTableSize","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","localAddress","path","rejectUnauthorized","minDHSize","ca","cert","clientCertEngine","ciphers","key","pfx","servername","minVersion","maxVersion","secureProtocol","crl","honorCipherOrder","ecdhCurve","dhparam","secureOptions","sessionIdContext"],$c=(e,t,r)=>{let s=0,n=e.length;for(;s<n;){let i=s+n>>>1;r(e[i],t)?s=i+1:n=i}return s},Ic=(e,t)=>e.remoteSettings.maxConcurrentStreams>t.remoteSettings.maxConcurrentStreams,ir=(e,t)=>{for(let r of e)r[Q].length<t[Q].length&&r[Q].every(s=>t[Q].includes(s))&&r[W]+t[W]<=t.remoteSettings.maxConcurrentStreams&&Mn(r)},Uc=(e,t)=>{for(let r of e)t[Q].length<r[Q].length&&t[Q].every(s=>r[Q].includes(s))&&t[W]+r[W]<=r.remoteSettings.maxConcurrentStreams&&Mn(t)},jn=({agent:e,isFree:t})=>{let r={};for(let s in e.sessions){let i=e.sessions[s].filter(o=>{let a=o[le.kCurrentStreamsCount]<o.remoteSettings.maxConcurrentStreams;return t?a:!a});i.length!==0&&(r[s]=i)}return r},Mn=e=>{e[je]=!0,e[W]===0&&e.close()},le=class extends kc{constructor({timeout:t=6e4,maxSessions:r=1/0,maxFreeSessions:s=10,maxCachedTlsSessions:n=100}={}){super();this.sessions={},this.queue={},this.timeout=t,this.maxSessions=r,this.maxFreeSessions=s,this._freeSessionsCount=0,this._sessionsCount=0,this.settings={enablePush:!1},this.tlsSessionCache=new Mc({maxSize:n})}static normalizeOrigin(t,r){return typeof t=="string"&&(t=new URL(t)),r&&t.hostname!==r&&(t.hostname=r),t.origin}normalizeOptions(t){let r="";if(t)for(let s of Dc)t[s]&&(r+=`:${t[s]}`);return r}_tryToCreateNewSession(t,r){if(!(t in this.queue)||!(r in this.queue[t]))return;let s=this.queue[t][r];this._sessionsCount<this.maxSessions&&!s.completed&&(s.completed=!0,s())}getSession(t,r,s){return new Promise((n,i)=>{Array.isArray(s)?(s=[...s],n()):s=[{resolve:n,reject:i}];let o=this.normalizeOptions(r),a=le.normalizeOrigin(t,r&&r.servername);if(a===void 0){for(let{reject:y}of s)y(new TypeError("The `origin` argument needs to be a string or an URL object"));return}if(o in this.sessions){let y=this.sessions[o],f=-1,d=-1,m;for(let g of y){let v=g.remoteSettings.maxConcurrentStreams;if(v<f)break;if(g[Q].includes(a)){let p=g[W];if(p>=v||g[je]||g.destroyed)continue;m||(f=v),p>d&&(m=g,d=p)}}if(m){if(s.length!==1){for(let{reject:g}of s){let v=new Error(`Expected the length of listeners to be 1, got ${s.length}.
Please report this to https://github.com/szmarczak/http2-wrapper/`);g(v)}return}s[0].resolve(m);return}}if(o in this.queue){if(a in this.queue[o]){this.queue[o][a].listeners.push(...s),this._tryToCreateNewSession(o,a);return}}else this.queue[o]={};let l=()=>{o in this.queue&&this.queue[o][a]===u&&(delete this.queue[o][a],Object.keys(this.queue[o]).length===0&&delete this.queue[o])},u=()=>{let y=`${a}:${o}`,f=!1;try{let d=jc.connect(t,{createConnection:this.createConnection,settings:this.settings,session:this.tlsSessionCache.get(y),...r});d[W]=0,d[je]=!1;let m=()=>d[W]<d.remoteSettings.maxConcurrentStreams,g=!0;d.socket.once("session",p=>{this.tlsSessionCache.set(y,p)}),d.once("error",p=>{for(let{reject:E}of s)E(p);this.tlsSessionCache.delete(y)}),d.setTimeout(this.timeout,()=>{d.destroy()}),d.once("close",()=>{if(f){g&&this._freeSessionsCount--,this._sessionsCount--;let p=this.sessions[o];p.splice(p.indexOf(d),1),p.length===0&&delete this.sessions[o]}else{let p=new Error("Session closed without receiving a SETTINGS frame");p.code="HTTP2WRAPPER_NOSETTINGS";for(let{reject:E}of s)E(p);l()}this._tryToCreateNewSession(o,a)});let v=()=>{if(!(!(o in this.queue)||!m())){for(let p of d[Q])if(p in this.queue[o]){let{listeners:E}=this.queue[o][p];for(;E.length!==0&&m();)E.shift().resolve(d);let q=this.queue[o];if(q[p].listeners.length===0&&(delete q[p],Object.keys(q).length===0)){delete this.queue[o];break}if(!m())break}}};d.on("origin",()=>{d[Q]=d.originSet,!!m()&&(v(),ir(this.sessions[o],d))}),d.once("remoteSettings",()=>{if(d.ref(),d.unref(),this._sessionsCount++,u.destroyed){let p=new Error("Agent has been destroyed");for(let E of s)E.reject(p);d.destroy();return}d[Q]=d.originSet;{let p=this.sessions;if(o in p){let E=p[o];E.splice($c(E,d,Ic),0,d)}else p[o]=[d]}this._freeSessionsCount+=1,f=!0,this.emit("session",d),v(),l(),d[W]===0&&this._freeSessionsCount>this.maxFreeSessions&&d.close(),s.length!==0&&(this.getSession(a,r,s),s.length=0),d.on("remoteSettings",()=>{v(),ir(this.sessions[o],d)})}),d[qn]=d.request,d.request=(p,E)=>{if(d[je])throw new Error("The session is gracefully closing. No new streams are allowed.");let q=d[qn](p,E);return d.ref(),++d[W],d[W]===d.remoteSettings.maxConcurrentStreams&&this._freeSessionsCount--,q.once("close",()=>{if(g=m(),--d[W],!d.destroyed&&!d.closed&&(Uc(this.sessions[o],d),m()&&!d.closed)){g||(this._freeSessionsCount++,g=!0);let U=d[W]===0;U&&d.unref(),U&&(this._freeSessionsCount>this.maxFreeSessions||d[je])?d.close():(ir(this.sessions[o],d),v())}}),q}}catch(d){for(let m of s)m.reject(d);l()}};u.listeners=s,u.completed=!1,u.destroyed=!1,this.queue[o][a]=u,this._tryToCreateNewSession(o,a)})}request(t,r,s,n){return new Promise((i,o)=>{this.getSession(t,r,[{reject:o,resolve:a=>{try{i(a.request(s,n))}catch(l){o(l)}}}])})}createConnection(t,r){return le.connect(t,r)}static connect(t,r){r.ALPNProtocols=["h2"];let s=t.port||443,n=t.hostname||t.host;return typeof r.servername=="undefined"&&(r.servername=n),qc.connect(s,n,r)}closeFreeSessions(){for(let t of Object.values(this.sessions))for(let r of t)r[W]===0&&r.close()}destroy(t){for(let r of Object.values(this.sessions))for(let s of r)s.destroy(t);for(let r of Object.values(this.queue))for(let s of Object.values(r))s.destroyed=!0;this.queue={}}get freeSessions(){return jn({agent:this,isFree:!0})}get busySessions(){return jn({agent:this,isFree:!1})}};le.kCurrentStreamsCount=W;le.kGracefullyClosing=je;Dn.exports={Agent:le,globalAgent:new le}});var ar=b((sh,In)=>{"use strict";var{Readable:Lc}=require("stream"),$n=class extends Lc{constructor(t,r){super({highWaterMark:r,autoDestroy:!1});this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=t,this.connection=t,this._dumped=!1}_destroy(t){this.req._request.destroy(t)}setTimeout(t,r){return this.req.setTimeout(t,r),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}};In.exports=$n});var cr=b((nh,Un)=>{"use strict";Un.exports=e=>{let t={protocol:e.protocol,hostname:typeof e.hostname=="string"&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return typeof e.port=="string"&&e.port.length!==0&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}});var Hn=b((ih,Ln)=>{"use strict";Ln.exports=(e,t,r)=>{for(let s of r)e.on(s,(...n)=>t.emit(s,...n))}});var Bn=b((oh,Nn)=>{"use strict";Nn.exports=e=>{switch(e){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}});var Fn=b((ch,zn)=>{"use strict";var Me=(e,t,r)=>{zn.exports[t]=class extends e{constructor(...n){super(typeof r=="string"?r:r(n));this.name=`${super.name} [${t}]`,this.code=t}}};Me(TypeError,"ERR_INVALID_ARG_TYPE",e=>{let t=e[0].includes(".")?"property":"argument",r=e[1],s=Array.isArray(r);return s&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${e[0]}" ${t} must be ${s?"one of":"of"} type ${r}. Received ${typeof e[2]}`});Me(TypeError,"ERR_INVALID_PROTOCOL",e=>`Protocol "${e[0]}" not supported. Expected "${e[1]}"`);Me(Error,"ERR_HTTP_HEADERS_SENT",e=>`Cannot ${e[0]} headers after they are sent to the client`);Me(TypeError,"ERR_INVALID_HTTP_TOKEN",e=>`${e[0]} must be a valid HTTP token [${e[1]}]`);Me(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",e=>`Invalid value "${e[0]} for header "${e[1]}"`);Me(TypeError,"ERR_INVALID_CHAR",e=>`Invalid character in ${e[0]} [${e[1]}]`)});var fr=b((uh,Xn)=>{"use strict";var Hc=require("http2"),{Writable:Nc}=require("stream"),{Agent:Vn,globalAgent:Bc}=or(),zc=ar(),Fc=cr(),Vc=Hn(),Wc=Bn(),{ERR_INVALID_ARG_TYPE:ur,ERR_INVALID_PROTOCOL:Gc,ERR_HTTP_HEADERS_SENT:Wn,ERR_INVALID_HTTP_TOKEN:Jc,ERR_HTTP_INVALID_HEADER_VALUE:Kc,ERR_INVALID_CHAR:Yc}=Fn(),{HTTP2_HEADER_STATUS:Gn,HTTP2_HEADER_METHOD:Jn,HTTP2_HEADER_PATH:Kn,HTTP2_METHOD_CONNECT:Qc}=Hc.constants,F=Symbol("headers"),lr=Symbol("origin"),hr=Symbol("session"),Yn=Symbol("options"),gt=Symbol("flushedHeaders"),Je=Symbol("jobs"),Xc=/^[\^`\-\w!#$%&*+.|~]+$/,Zc=/[^\t\u0020-\u007E\u0080-\u00FF]/,Qn=class extends Nc{constructor(t,r,s){super({autoDestroy:!1});let n=typeof t=="string"||t instanceof URL;if(n&&(t=Fc(t instanceof URL?t:new URL(t))),typeof r=="function"||r===void 0?(s=r,r=n?t:{...t}):r={...t,...r},r.h2session)this[hr]=r.h2session;else if(r.agent===!1)this.agent=new Vn({maxFreeSessions:0});else if(typeof r.agent=="undefined"||r.agent===null)typeof r.createConnection=="function"?(this.agent=new Vn({maxFreeSessions:0}),this.agent.createConnection=r.createConnection):this.agent=Bc;else if(typeof r.agent.request=="function")this.agent=r.agent;else throw new ur("options.agent",["Agent-like Object","undefined","false"],r.agent);if(r.protocol&&r.protocol!=="https:")throw new Gc(r.protocol,"https:");let i=r.port||r.defaultPort||this.agent&&this.agent.defaultPort||443,o=r.hostname||r.host||"localhost";delete r.hostname,delete r.host,delete r.port;let{timeout:a}=r;if(r.timeout=void 0,this[F]=Object.create(null),this[Je]=[],this.socket=null,this.connection=null,this.method=r.method||"GET",this.path=r.path,this.res=null,this.aborted=!1,this.reusedSocket=!1,r.headers)for(let[l,u]of Object.entries(r.headers))this.setHeader(l,u);r.auth&&!("authorization"in this[F])&&(this[F].authorization="Basic "+Buffer.from(r.auth).toString("base64")),r.session=r.tlsSession,r.path=r.socketPath,this[Yn]=r,i===443?(this[lr]=`https://${o}`,":authority"in this[F]||(this[F][":authority"]=o)):(this[lr]=`https://${o}:${i}`,":authority"in this[F]||(this[F][":authority"]=`${o}:${i}`)),a&&this.setTimeout(a),s&&this.once("response",s),this[gt]=!1}get method(){return this[F][Jn]}set method(t){t&&(this[F][Jn]=t.toUpperCase())}get path(){return this[F][Kn]}set path(t){t&&(this[F][Kn]=t)}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(t,r,s){if(this._mustNotHaveABody){s(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();let n=()=>this._request.write(t,r,s);this._request?n():this[Je].push(n)}_final(t){if(this.destroyed)return;this.flushHeaders();let r=()=>{if(this._mustNotHaveABody){t();return}this._request.end(t)};this._request?r():this[Je].push(r)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}_destroy(t,r){this.res&&this.res._dump(),this._request&&this._request.destroy(),r(t)}async flushHeaders(){if(this[gt]||this.destroyed)return;this[gt]=!0;let t=this.method===Qc,r=s=>{if(this._request=s,this.destroyed){s.destroy();return}t||Vc(s,this,["timeout","continue","close","error"]);let n=o=>(...a)=>{!this.writable&&!this.destroyed?o(...a):this.once("finish",()=>{o(...a)})};s.once("response",n((o,a,l)=>{let u=new zc(this.socket,s.readableHighWaterMark);this.res=u,u.req=this,u.statusCode=o[Gn],u.headers=o,u.rawHeaders=l,u.once("end",()=>{this.aborted?(u.aborted=!0,u.emit("aborted")):(u.complete=!0,u.socket=null,u.connection=null)}),t?(u.upgrade=!0,this.emit("connect",u,s,Buffer.alloc(0))?this.emit("close"):s.destroy()):(s.on("data",y=>{!u._dumped&&!u.push(y)&&s.pause()}),s.once("end",()=>{u.push(null)}),this.emit("response",u)||u._dump())})),s.once("headers",n(o=>this.emit("information",{statusCode:o[Gn]}))),s.once("trailers",n((o,a,l)=>{let{res:u}=this;u.trailers=o,u.rawTrailers=l}));let{socket:i}=s.session;this.socket=i,this.connection=i;for(let o of this[Je])o();this.emit("socket",this.socket)};if(this[hr])try{r(this[hr].request(this[F]))}catch(s){this.emit("error",s)}else{this.reusedSocket=!0;try{r(await this.agent.request(this[lr],this[Yn],this[F]))}catch(s){this.emit("error",s)}}}getHeader(t){if(typeof t!="string")throw new ur("name","string",t);return this[F][t.toLowerCase()]}get headersSent(){return this[gt]}removeHeader(t){if(typeof t!="string")throw new ur("name","string",t);if(this.headersSent)throw new Wn("remove");delete this[F][t.toLowerCase()]}setHeader(t,r){if(this.headersSent)throw new Wn("set");if(typeof t!="string"||!Xc.test(t)&&!Wc(t))throw new Jc("Header name",t);if(typeof r=="undefined")throw new Kc(r,t);if(Zc.test(r))throw new Yc("header content",t);this[F][t.toLowerCase()]=r}setNoDelay(){}setSocketKeepAlive(){}setTimeout(t,r){let s=()=>this._request.setTimeout(t,r);return this._request?s():this[Je].push(s),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(t){}};Xn.exports=Qn});var ei=b((lh,Zn)=>{"use strict";var eu=require("tls");Zn.exports=(e={},t=eu.connect)=>new Promise((r,s)=>{let n=!1,i,o=async()=>{await l,i.off("timeout",a),i.off("error",s),e.resolveSocket?(r({alpnProtocol:i.alpnProtocol,socket:i,timeout:n}),n&&(await Promise.resolve(),i.emit("timeout"))):(i.destroy(),r({alpnProtocol:i.alpnProtocol,timeout:n}))},a=async()=>{n=!0,o()},l=(async()=>{try{i=await t(e,o),i.on("error",s),i.once("timeout",a)}catch(u){s(u)}})()})});var ri=b((hh,ti)=>{"use strict";var tu=require("net");ti.exports=e=>{let t=e.host,r=e.headers&&e.headers.host;return r&&(r.startsWith("[")?r.indexOf("]")===-1?t=r:t=r.slice(1,-1):t=r.split(":",1)[0]),tu.isIP(t)?"":t}});var ii=b((fh,pr)=>{"use strict";var si=require("http"),dr=require("https"),ru=ei(),su=nr(),nu=fr(),iu=ri(),ou=cr(),_t=new su({maxSize:100}),Ke=new Map,ni=(e,t,r)=>{t._httpMessage={shouldKeepAlive:!0};let s=()=>{e.emit("free",t,r)};t.on("free",s);let n=()=>{e.removeSocket(t,r)};t.on("close",n);let i=()=>{e.removeSocket(t,r),t.off("close",n),t.off("free",s),t.off("agentRemove",i)};t.on("agentRemove",i),e.emit("free",t,r)},au=async e=>{let t=`${e.host}:${e.port}:${e.ALPNProtocols.sort()}`;if(!_t.has(t)){if(Ke.has(t))return(await Ke.get(t)).alpnProtocol;let{path:r,agent:s}=e;e.path=e.socketPath;let n=ru(e);Ke.set(t,n);try{let{socket:i,alpnProtocol:o}=await n;if(_t.set(t,o),e.path=r,o==="h2")i.destroy();else{let{globalAgent:a}=dr,l=dr.Agent.prototype.createConnection;s?s.createConnection===l?ni(s,i,e):i.destroy():a.createConnection===l?ni(a,i,e):i.destroy()}return Ke.delete(t),o}catch(i){throw Ke.delete(t),i}}return _t.get(t)};pr.exports=async(e,t,r)=>{if((typeof e=="string"||e instanceof URL)&&(e=ou(new URL(e))),typeof t=="function"&&(r=t,t=void 0),t={ALPNProtocols:["h2","http/1.1"],...e,...t,resolveSocket:!0},!Array.isArray(t.ALPNProtocols)||t.ALPNProtocols.length===0)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");t.protocol=t.protocol||"https:";let s=t.protocol==="https:";t.host=t.hostname||t.host||"localhost",t.session=t.tlsSession,t.servername=t.servername||iu(t),t.port=t.port||(s?443:80),t._defaultAgent=s?dr.globalAgent:si.globalAgent;let n=t.agent;if(n){if(n.addRequest)throw new Error("The `options.agent` object can contain only `http`, `https` or `http2` properties");t.agent=n[s?"https":"http"]}return s&&await au(t)==="h2"?(n&&(t.agent=n.http2),new nu(t,r)):si.request(t,r)};pr.exports.protocolCache=_t});var ai=b((dh,oi)=>{"use strict";var cu=require("http2"),uu=or(),mr=fr(),lu=ar(),hu=ii(),fu=(e,t,r)=>new mr(e,t,r),du=(e,t,r)=>{let s=new mr(e,t,r);return s.end(),s};oi.exports={...cu,ClientRequest:mr,IncomingMessage:lu,...uu,request:fu,get:du,auto:hu}});var gr=b(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});var ci=ue();yr.default=e=>ci.default.nodeStream(e)&&ci.default.function_(e.getBoundary)});var fi=b(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});var ui=require("fs"),li=require("util"),hi=ue(),pu=gr(),mu=li.promisify(ui.stat);_r.default=async(e,t)=>{if(t&&"content-length"in t)return Number(t["content-length"]);if(!e)return 0;if(hi.default.string(e))return Buffer.byteLength(e);if(hi.default.buffer(e))return e.length;if(pu.default(e))return li.promisify(e.getLength.bind(e))();if(e instanceof ui.ReadStream){let{size:r}=await mu(e.path);return r===0?void 0:r}}});var br=b(wr=>{"use strict";Object.defineProperty(wr,"__esModule",{value:!0});function yu(e,t,r){let s={};for(let n of r)s[n]=(...i)=>{t.emit(n,...i)},e.on(n,s[n]);return()=>{for(let n of r)e.off(n,s[n])}}wr.default=yu});var di=b(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.default=()=>{let e=[];return{once(t,r,s){t.once(r,s),e.push({origin:t,event:r,fn:s})},unhandleAll(){for(let t of e){let{origin:r,event:s,fn:n}=t;r.removeListener(s,n)}e.length=0}}}});var mi=b(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.TimeoutError=void 0;var gu=require("net"),_u=di(),pi=Symbol("reentry"),wu=()=>{},Er=class extends Error{constructor(t,r){super(`Timeout awaiting '${r}' for ${t}ms`);this.event=r,this.name="TimeoutError",this.code="ETIMEDOUT"}};Ye.TimeoutError=Er;Ye.default=(e,t,r)=>{if(pi in e)return wu;e[pi]=!0;let s=[],{once:n,unhandleAll:i}=_u.default(),o=(f,d,m)=>{var g;let v=setTimeout(d,f,f,m);(g=v.unref)===null||g===void 0||g.call(v);let p=()=>{clearTimeout(v)};return s.push(p),p},{host:a,hostname:l}=r,u=(f,d)=>{e.destroy(new Er(f,d))},y=()=>{for(let f of s)f();i()};if(e.once("error",f=>{if(y(),e.listenerCount("error")===0)throw f}),e.once("close",y),n(e,"response",f=>{n(f,"end",y)}),typeof t.request!="undefined"&&o(t.request,u,"request"),typeof t.socket!="undefined"){let f=()=>{u(t.socket,"socket")};e.setTimeout(t.socket,f),s.push(()=>{e.removeListener("timeout",f)})}return n(e,"socket",f=>{var d;let{socketPath:m}=e;if(f.connecting){let g=Boolean(m??gu.isIP((d=l??a)!==null&&d!==void 0?d:"")!==0);if(typeof t.lookup!="undefined"&&!g&&typeof f.address().address=="undefined"){let v=o(t.lookup,u,"lookup");n(f,"lookup",v)}if(typeof t.connect!="undefined"){let v=()=>o(t.connect,u,"connect");g?n(f,"connect",v()):n(f,"lookup",p=>{p===null&&n(f,"connect",v())})}typeof t.secureConnect!="undefined"&&r.protocol==="https:"&&n(f,"connect",()=>{let v=o(t.secureConnect,u,"secureConnect");n(f,"secureConnect",v)})}if(typeof t.send!="undefined"){let g=()=>o(t.send,u,"send");f.connecting?n(f,"connect",()=>{n(e,"upload-complete",g())}):n(e,"upload-complete",g())}}),typeof t.response!="undefined"&&n(e,"upload-complete",()=>{let f=o(t.response,u,"response");n(e,"response",f)}),y}});var gi=b(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});var yi=ue();Sr.default=e=>{e=e;let t={protocol:e.protocol,hostname:yi.default.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return yi.default.string(e.port)&&e.port.length>0&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}});var _i=b(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});var bu=require("url"),vu=["protocol","host","hostname","port","pathname","search"];Tr.default=(e,t)=>{var r,s;if(t.path){if(t.pathname)throw new TypeError("Parameters `path` and `pathname` are mutually exclusive.");if(t.search)throw new TypeError("Parameters `path` and `search` are mutually exclusive.");if(t.searchParams)throw new TypeError("Parameters `path` and `searchParams` are mutually exclusive.")}if(t.search&&t.searchParams)throw new TypeError("Parameters `search` and `searchParams` are mutually exclusive.");if(!e){if(!t.protocol)throw new TypeError("No URL protocol specified");e=`${t.protocol}//${(s=(r=t.hostname)!==null&&r!==void 0?r:t.host)!==null&&s!==void 0?s:""}`}let n=new bu.URL(e);if(t.path){let i=t.path.indexOf("?");i===-1?t.pathname=t.path:(t.pathname=t.path.slice(0,i),t.search=t.path.slice(i+1)),delete t.path}for(let i of vu)t[i]&&(n[i]=t[i].toString());return n}});var bi=b(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});var wi=class{constructor(){this.weakMap=new WeakMap,this.map=new Map}set(t,r){typeof t=="object"?this.weakMap.set(t,r):this.map.set(t,r)}get(t){return typeof t=="object"?this.weakMap.get(t):this.map.get(t)}has(t){return typeof t=="object"?this.weakMap.has(t):this.map.has(t)}};Rr.default=wi});var Pr=b(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});var Eu=async e=>{let t=[],r=0;for await(let s of e)t.push(s),r+=Buffer.byteLength(s);return Buffer.isBuffer(t[0])?Buffer.concat(t,r):Buffer.from(t.join(""))};Or.default=Eu});var Ei=b(Se=>{"use strict";Object.defineProperty(Se,"__esModule",{value:!0});Se.dnsLookupIpVersionToFamily=Se.isDnsLookupIpVersion=void 0;var vi={auto:0,ipv4:4,ipv6:6};Se.isDnsLookupIpVersion=e=>e in vi;Se.dnsLookupIpVersionToFamily=e=>{if(Se.isDnsLookupIpVersion(e))return vi[e];throw new Error("Invalid DNS lookup IP version")}});var Ar=b(wt=>{"use strict";Object.defineProperty(wt,"__esModule",{value:!0});wt.isResponseOk=void 0;wt.isResponseOk=e=>{let{statusCode:t}=e,r=e.request.options.followRedirect?299:399;return t>=200&&t<=r||t===304}});var Ti=b(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});var Si=new Set;xr.default=e=>{Si.has(e)||(Si.add(e),process.emitWarning(`Got: ${e}`,{type:"DeprecationWarning"}))}});var Ri=b(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});var D=ue(),Su=(e,t)=>{if(D.default.null_(e.encoding))throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");D.assert.any([D.default.string,D.default.undefined],e.encoding),D.assert.any([D.default.boolean,D.default.undefined],e.resolveBodyOnly),D.assert.any([D.default.boolean,D.default.undefined],e.methodRewriting),D.assert.any([D.default.boolean,D.default.undefined],e.isStream),D.assert.any([D.default.string,D.default.undefined],e.responseType),e.responseType===void 0&&(e.responseType="text");let{retry:r}=e;if(t?e.retry={...t.retry}:e.retry={calculateDelay:s=>s.computedValue,limit:0,methods:[],statusCodes:[],errorCodes:[],maxRetryAfter:void 0},D.default.object(r)?(e.retry={...e.retry,...r},e.retry.methods=[...new Set(e.retry.methods.map(s=>s.toUpperCase()))],e.retry.statusCodes=[...new Set(e.retry.statusCodes)],e.retry.errorCodes=[...new Set(e.retry.errorCodes)]):D.default.number(r)&&(e.retry.limit=r),D.default.undefined(e.retry.maxRetryAfter)&&(e.retry.maxRetryAfter=Math.min(...[e.timeout.request,e.timeout.connect].filter(D.default.number))),D.default.object(e.pagination)){t&&(e.pagination={...t.pagination,...e.pagination});let{pagination:s}=e;if(!D.default.function_(s.transform))throw new Error("`options.pagination.transform` must be implemented");if(!D.default.function_(s.shouldContinue))throw new Error("`options.pagination.shouldContinue` must be implemented");if(!D.default.function_(s.filter))throw new TypeError("`options.pagination.filter` must be implemented");if(!D.default.function_(s.paginate))throw new Error("`options.pagination.paginate` must be implemented")}return e.responseType==="json"&&e.headers.accept===void 0&&(e.headers.accept="application/json"),e};Cr.default=Su});var Oi=b(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.retryAfterStatusCodes=void 0;Qe.retryAfterStatusCodes=new Set([413,429,503]);var Tu=({attemptCount:e,retryOptions:t,error:r,retryAfter:s})=>{if(e>t.limit)return 0;let n=t.methods.includes(r.options.method),i=t.errorCodes.includes(r.code),o=r.response&&t.statusCodes.includes(r.response.statusCode);if(!n||!i&&!o)return 0;if(r.response){if(s)return t.maxRetryAfter===void 0||s>t.maxRetryAfter?0:s;if(r.response.statusCode===413)return 0}let a=Math.random()*100;return 2**(e-1)*1e3+a};Qe.default=Tu});var Ze=b(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});C.UnsupportedProtocolError=C.ReadError=C.TimeoutError=C.UploadError=C.CacheError=C.HTTPError=C.MaxRedirectsError=C.RequestError=C.setNonEnumerableProperties=C.knownHookEvents=C.withoutBody=C.kIsNormalizedAlready=void 0;var Pi=require("util"),Ai=require("stream"),Ru=require("fs"),ge=require("url"),xi=require("http"),kr=require("http"),Ou=require("https"),Pu=$s(),Au=zs(),Ci=Rn(),xu=xn(),Cu=ai(),ku=mt(),h=ue(),qu=fi(),ki=gr(),ju=br(),qi=mi(),Mu=gi(),ji=_i(),Du=bi(),$u=Pr(),Mi=Ei(),Iu=Ar(),_e=Ti(),Uu=Ri(),Lu=Oi(),qr,B=Symbol("request"),bt=Symbol("response"),De=Symbol("responseSize"),$e=Symbol("downloadedSize"),Ie=Symbol("bodySize"),Ue=Symbol("uploadedSize"),vt=Symbol("serverResponsesPiped"),Di=Symbol("unproxyEvents"),$i=Symbol("isFromCache"),jr=Symbol("cancelTimeouts"),Ii=Symbol("startedReading"),Le=Symbol("stopReading"),Et=Symbol("triggerRead"),we=Symbol("body"),Xe=Symbol("jobs"),Ui=Symbol("originalResponse"),Li=Symbol("retryTimeout");C.kIsNormalizedAlready=Symbol("isNormalizedAlready");var Hu=h.default.string(process.versions.brotli);C.withoutBody=new Set(["GET","HEAD"]);C.knownHookEvents=["init","beforeRequest","beforeRedirect","beforeError","beforeRetry","afterResponse"];function Nu(e){for(let t in e){let r=e[t];if(!h.default.string(r)&&!h.default.number(r)&&!h.default.boolean(r)&&!h.default.null_(r)&&!h.default.undefined(r))throw new TypeError(`The \`searchParams\` value '${String(r)}' must be a string, number, boolean or null`)}}function Bu(e){return h.default.object(e)&&!("statusCode"in e)}var Mr=new Du.default,zu=async e=>new Promise((t,r)=>{let s=n=>{r(n)};e.pending||t(),e.once("error",s),e.once("ready",()=>{e.off("error",s),t()})}),Fu=new Set([300,301,302,303,304,307,308]),Vu=["context","body","json","form"];C.setNonEnumerableProperties=(e,t)=>{let r={};for(let s of e)if(!!s)for(let n of Vu)n in s&&(r[n]={writable:!0,configurable:!0,enumerable:!1,value:s[n]});Object.defineProperties(t,r)};var H=class extends Error{constructor(t,r,s){var n,i;super(t);if(Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=(n=r.code)!==null&&n!==void 0?n:"ERR_GOT_REQUEST_ERROR",s instanceof Nr?(Object.defineProperty(this,"request",{enumerable:!1,value:s}),Object.defineProperty(this,"response",{enumerable:!1,value:s[bt]}),Object.defineProperty(this,"options",{enumerable:!1,value:s.options})):Object.defineProperty(this,"options",{enumerable:!1,value:s}),this.timings=(i=this.request)===null||i===void 0?void 0:i.timings,h.default.string(r.stack)&&h.default.string(this.stack)){let o=this.stack.indexOf(this.message)+this.message.length,a=this.stack.slice(o).split(`
`).reverse(),l=r.stack.slice(r.stack.indexOf(r.message)+r.message.length).split(`
`).reverse();for(;l.length!==0&&l[0]===a[0];)a.shift();this.stack=`${this.stack.slice(0,o)}${a.reverse().join(`
`)}${l.reverse().join(`
`)}`}}};C.RequestError=H;var Dr=class extends H{constructor(t){super(`Redirected ${t.options.maxRedirects} times. Aborting.`,{},t);this.name="MaxRedirectsError",this.code="ERR_TOO_MANY_REDIRECTS"}};C.MaxRedirectsError=Dr;var $r=class extends H{constructor(t){super(`Response code ${t.statusCode} (${t.statusMessage})`,{},t.request);this.name="HTTPError",this.code="ERR_NON_2XX_3XX_RESPONSE"}};C.HTTPError=$r;var Ir=class extends H{constructor(t,r){super(t.message,t,r);this.name="CacheError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}};C.CacheError=Ir;var Ur=class extends H{constructor(t,r){super(t.message,t,r);this.name="UploadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}};C.UploadError=Ur;var Lr=class extends H{constructor(t,r,s){super(t.message,t,s);this.name="TimeoutError",this.event=t.event,this.timings=r}};C.TimeoutError=Lr;var St=class extends H{constructor(t,r){super(t.message,t,r);this.name="ReadError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}};C.ReadError=St;var Hr=class extends H{constructor(t){super(`Unsupported protocol "${t.url.protocol}"`,{},t);this.name="UnsupportedProtocolError",this.code="ERR_UNSUPPORTED_PROTOCOL"}};C.UnsupportedProtocolError=Hr;var Wu=["socket","connect","continue","information","upgrade","timeout"],Nr=class extends Ai.Duplex{constructor(t,r={},s){super({autoDestroy:!1,highWaterMark:0});this[$e]=0,this[Ue]=0,this.requestInitialized=!1,this[vt]=new Set,this.redirects=[],this[Le]=!1,this[Et]=!1,this[Xe]=[],this.retryCount=0,this._progressCallbacks=[];let n=()=>this._unlockWrite(),i=()=>this._lockWrite();this.on("pipe",u=>{u.prependListener("data",n),u.on("data",i),u.prependListener("end",n),u.on("end",i)}),this.on("unpipe",u=>{u.off("data",n),u.off("data",i),u.off("end",n),u.off("end",i)}),this.on("pipe",u=>{u instanceof kr.IncomingMessage&&(this.options.headers={...u.headers,...this.options.headers})});let{json:o,body:a,form:l}=r;if((o||a||l)&&this._lockWrite(),C.kIsNormalizedAlready in r)this.options=r;else try{this.options=this.constructor.normalizeArguments(t,r,s)}catch(u){h.default.nodeStream(r.body)&&r.body.destroy(),this.destroy(u);return}(async()=>{var u;try{this.options.body instanceof Ru.ReadStream&&await zu(this.options.body);let{url:y}=this.options;if(!y)throw new TypeError("Missing `url` property");if(this.requestUrl=y.toString(),decodeURI(this.requestUrl),await this._finalizeBody(),await this._makeRequest(),this.destroyed){(u=this[B])===null||u===void 0||u.destroy();return}for(let f of this[Xe])f();this[Xe].length=0,this.requestInitialized=!0}catch(y){if(y instanceof H){this._beforeError(y);return}this.destroyed||this.destroy(y)}})()}static normalizeArguments(t,r,s){var n,i,o,a,l;let u=r;if(h.default.object(t)&&!h.default.urlInstance(t))r={...s,...t,...r};else{if(t&&r&&r.url!==void 0)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");r={...s,...r},t!==void 0&&(r.url=t),h.default.urlInstance(r.url)&&(r.url=new ge.URL(r.url.toString()))}if(r.cache===!1&&(r.cache=void 0),r.dnsCache===!1&&(r.dnsCache=void 0),h.assert.any([h.default.string,h.default.undefined],r.method),h.assert.any([h.default.object,h.default.undefined],r.headers),h.assert.any([h.default.string,h.default.urlInstance,h.default.undefined],r.prefixUrl),h.assert.any([h.default.object,h.default.undefined],r.cookieJar),h.assert.any([h.default.object,h.default.string,h.default.undefined],r.searchParams),h.assert.any([h.default.object,h.default.string,h.default.undefined],r.cache),h.assert.any([h.default.object,h.default.number,h.default.undefined],r.timeout),h.assert.any([h.default.object,h.default.undefined],r.context),h.assert.any([h.default.object,h.default.undefined],r.hooks),h.assert.any([h.default.boolean,h.default.undefined],r.decompress),h.assert.any([h.default.boolean,h.default.undefined],r.ignoreInvalidCookies),h.assert.any([h.default.boolean,h.default.undefined],r.followRedirect),h.assert.any([h.default.number,h.default.undefined],r.maxRedirects),h.assert.any([h.default.boolean,h.default.undefined],r.throwHttpErrors),h.assert.any([h.default.boolean,h.default.undefined],r.http2),h.assert.any([h.default.boolean,h.default.undefined],r.allowGetBody),h.assert.any([h.default.string,h.default.undefined],r.localAddress),h.assert.any([Mi.isDnsLookupIpVersion,h.default.undefined],r.dnsLookupIpVersion),h.assert.any([h.default.object,h.default.undefined],r.https),h.assert.any([h.default.boolean,h.default.undefined],r.rejectUnauthorized),r.https&&(h.assert.any([h.default.boolean,h.default.undefined],r.https.rejectUnauthorized),h.assert.any([h.default.function_,h.default.undefined],r.https.checkServerIdentity),h.assert.any([h.default.string,h.default.object,h.default.array,h.default.undefined],r.https.certificateAuthority),h.assert.any([h.default.string,h.default.object,h.default.array,h.default.undefined],r.https.key),h.assert.any([h.default.string,h.default.object,h.default.array,h.default.undefined],r.https.certificate),h.assert.any([h.default.string,h.default.undefined],r.https.passphrase),h.assert.any([h.default.string,h.default.buffer,h.default.array,h.default.undefined],r.https.pfx)),h.assert.any([h.default.object,h.default.undefined],r.cacheOptions),h.default.string(r.method)?r.method=r.method.toUpperCase():r.method="GET",r.headers===(s==null?void 0:s.headers)?r.headers={...r.headers}:r.headers=ku({...s==null?void 0:s.headers,...r.headers}),"slashes"in r)throw new TypeError("The legacy `url.Url` has been deprecated. Use `URL` instead.");if("auth"in r)throw new TypeError("Parameter `auth` is deprecated. Use `username` / `password` instead.");if("searchParams"in r&&r.searchParams&&r.searchParams!==(s==null?void 0:s.searchParams)){let m;if(h.default.string(r.searchParams)||r.searchParams instanceof ge.URLSearchParams)m=new ge.URLSearchParams(r.searchParams);else{Nu(r.searchParams),m=new ge.URLSearchParams;for(let g in r.searchParams){let v=r.searchParams[g];v===null?m.append(g,""):v!==void 0&&m.append(g,v)}}(n=s==null?void 0:s.searchParams)===null||n===void 0||n.forEach((g,v)=>{m.has(v)||m.append(v,g)}),r.searchParams=m}if(r.username=(i=r.username)!==null&&i!==void 0?i:"",r.password=(o=r.password)!==null&&o!==void 0?o:"",h.default.undefined(r.prefixUrl)?r.prefixUrl=(a=s==null?void 0:s.prefixUrl)!==null&&a!==void 0?a:"":(r.prefixUrl=r.prefixUrl.toString(),r.prefixUrl!==""&&!r.prefixUrl.endsWith("/")&&(r.prefixUrl+="/")),h.default.string(r.url)){if(r.url.startsWith("/"))throw new Error("`input` must not start with a slash when using `prefixUrl`");r.url=ji.default(r.prefixUrl+r.url,r)}else(h.default.undefined(r.url)&&r.prefixUrl!==""||r.protocol)&&(r.url=ji.default(r.prefixUrl,r));if(r.url){"port"in r&&delete r.port;let{prefixUrl:m}=r;Object.defineProperty(r,"prefixUrl",{set:v=>{let p=r.url;if(!p.href.startsWith(v))throw new Error(`Cannot change \`prefixUrl\` from ${m} to ${v}: ${p.href}`);r.url=new ge.URL(v+p.href.slice(m.length)),m=v},get:()=>m});let{protocol:g}=r.url;if(g==="unix:"&&(g="http:",r.url=new ge.URL(`http://unix${r.url.pathname}${r.url.search}`)),r.searchParams&&(r.url.search=r.searchParams.toString()),g!=="http:"&&g!=="https:")throw new Hr(r);r.username===""?r.username=r.url.username:r.url.username=r.username,r.password===""?r.password=r.url.password:r.url.password=r.password}let{cookieJar:y}=r;if(y){let{setCookie:m,getCookieString:g}=y;h.assert.function_(m),h.assert.function_(g),m.length===4&&g.length===0&&(m=Pi.promisify(m.bind(r.cookieJar)),g=Pi.promisify(g.bind(r.cookieJar)),r.cookieJar={setCookie:m,getCookieString:g})}let{cache:f}=r;if(f&&(Mr.has(f)||Mr.set(f,new Ci((m,g)=>{let v=m[B](m,g);return h.default.promise(v)&&(v.once=(p,E)=>{if(p==="error")v.catch(E);else if(p==="abort")(async()=>{try{(await v).once("abort",E)}catch{}})();else throw new Error(`Unknown HTTP2 promise event: ${p}`);return v}),v},f))),r.cacheOptions={...r.cacheOptions},r.dnsCache===!0)qr||(qr=new Au.default),r.dnsCache=qr;else if(!h.default.undefined(r.dnsCache)&&!r.dnsCache.lookup)throw new TypeError(`Parameter \`dnsCache\` must be a CacheableLookup instance or a boolean, got ${h.default(r.dnsCache)}`);h.default.number(r.timeout)?r.timeout={request:r.timeout}:s&&r.timeout!==s.timeout?r.timeout={...s.timeout,...r.timeout}:r.timeout={...r.timeout},r.context||(r.context={});let d=r.hooks===(s==null?void 0:s.hooks);r.hooks={...r.hooks};for(let m of C.knownHookEvents)if(m in r.hooks)if(h.default.array(r.hooks[m]))r.hooks[m]=[...r.hooks[m]];else throw new TypeError(`Parameter \`${m}\` must be an Array, got ${h.default(r.hooks[m])}`);else r.hooks[m]=[];if(s&&!d)for(let m of C.knownHookEvents)s.hooks[m].length>0&&(r.hooks[m]=[...s.hooks[m],...r.hooks[m]]);if("family"in r&&_e.default('"options.family" was never documented, please use "options.dnsLookupIpVersion"'),(s==null?void 0:s.https)&&(r.https={...s.https,...r.https}),"rejectUnauthorized"in r&&_e.default('"options.rejectUnauthorized" is now deprecated, please use "options.https.rejectUnauthorized"'),"checkServerIdentity"in r&&_e.default('"options.checkServerIdentity" was never documented, please use "options.https.checkServerIdentity"'),"ca"in r&&_e.default('"options.ca" was never documented, please use "options.https.certificateAuthority"'),"key"in r&&_e.default('"options.key" was never documented, please use "options.https.key"'),"cert"in r&&_e.default('"options.cert" was never documented, please use "options.https.certificate"'),"passphrase"in r&&_e.default('"options.passphrase" was never documented, please use "options.https.passphrase"'),"pfx"in r&&_e.default('"options.pfx" was never documented, please use "options.https.pfx"'),"followRedirects"in r)throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.");if(r.agent){for(let m in r.agent)if(m!=="http"&&m!=="https"&&m!=="http2")throw new TypeError(`Expected the \`options.agent\` properties to be \`http\`, \`https\` or \`http2\`, got \`${m}\``)}return r.maxRedirects=(l=r.maxRedirects)!==null&&l!==void 0?l:0,C.setNonEnumerableProperties([s,u],r),Uu.default(r,s)}_lockWrite(){let t=()=>{throw new TypeError("The payload has been already provided")};this.write=t,this.end=t}_unlockWrite(){this.write=super.write,this.end=super.end}async _finalizeBody(){let{options:t}=this,{headers:r}=t,s=!h.default.undefined(t.form),n=!h.default.undefined(t.json),i=!h.default.undefined(t.body),o=s||n||i,a=C.withoutBody.has(t.method)&&!(t.method==="GET"&&t.allowGetBody);if(this._cannotHaveBody=a,o){if(a)throw new TypeError(`The \`${t.method}\` method cannot be used with a body`);if([i,s,n].filter(l=>l).length>1)throw new TypeError("The `body`, `json` and `form` options are mutually exclusive");if(i&&!(t.body instanceof Ai.Readable)&&!h.default.string(t.body)&&!h.default.buffer(t.body)&&!ki.default(t.body))throw new TypeError("The `body` option must be a stream.Readable, string or Buffer");if(s&&!h.default.object(t.form))throw new TypeError("The `form` option must be an Object");{let l=!h.default.string(r["content-type"]);i?(ki.default(t.body)&&l&&(r["content-type"]=`multipart/form-data; boundary=${t.body.getBoundary()}`),this[we]=t.body):s?(l&&(r["content-type"]="application/x-www-form-urlencoded"),this[we]=new ge.URLSearchParams(t.form).toString()):(l&&(r["content-type"]="application/json"),this[we]=t.stringifyJson(t.json));let u=await qu.default(this[we],t.headers);h.default.undefined(r["content-length"])&&h.default.undefined(r["transfer-encoding"])&&!a&&!h.default.undefined(u)&&(r["content-length"]=String(u))}}else a?this._lockWrite():this._unlockWrite();this[Ie]=Number(r["content-length"])||void 0}async _onResponseBase(t){let{options:r}=this,{url:s}=r;this[Ui]=t,r.decompress&&(t=xu(t));let n=t.statusCode,i=t;i.statusMessage=i.statusMessage?i.statusMessage:xi.STATUS_CODES[n],i.url=r.url.toString(),i.requestUrl=this.requestUrl,i.redirectUrls=this.redirects,i.request=this,i.isFromCache=t.fromCache||!1,i.ip=this.ip,i.retryCount=this.retryCount,this[$i]=i.isFromCache,this[De]=Number(t.headers["content-length"])||void 0,this[bt]=t,t.once("end",()=>{this[De]=this[$e],this.emit("downloadProgress",this.downloadProgress)}),t.once("error",a=>{t.destroy(),this._beforeError(new St(a,this))}),t.once("aborted",()=>{this._beforeError(new St({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);let o=t.headers["set-cookie"];if(h.default.object(r.cookieJar)&&o){let a=o.map(async l=>r.cookieJar.setCookie(l,s.toString()));r.ignoreInvalidCookies&&(a=a.map(async l=>l.catch(()=>{})));try{await Promise.all(a)}catch(l){this._beforeError(l);return}}if(r.followRedirect&&t.headers.location&&Fu.has(n)){if(t.resume(),this[B]&&(this[jr](),delete this[B],this[Di]()),(n===303&&r.method!=="GET"&&r.method!=="HEAD"||!r.methodRewriting)&&(r.method="GET","body"in r&&delete r.body,"json"in r&&delete r.json,"form"in r&&delete r.form,this[we]=void 0,delete r.headers["content-length"]),this.redirects.length>=r.maxRedirects){this._beforeError(new Dr(this));return}try{let l=Buffer.from(t.headers.location,"binary").toString(),u=new ge.URL(l,s),y=u.toString();decodeURI(y),u.hostname!==s.hostname||u.port!==s.port?("host"in r.headers&&delete r.headers.host,"cookie"in r.headers&&delete r.headers.cookie,"authorization"in r.headers&&delete r.headers.authorization,(r.username||r.password)&&(r.username="",r.password="")):(u.username=r.username,u.password=r.password),this.redirects.push(y),r.url=u;for(let f of r.hooks.beforeRedirect)await f(r,i);this.emit("redirect",i,r),await this._makeRequest()}catch(l){this._beforeError(l);return}return}if(r.isStream&&r.throwHttpErrors&&!Iu.isResponseOk(i)){this._beforeError(new $r(i));return}t.on("readable",()=>{this[Et]&&this._read()}),this.on("resume",()=>{t.resume()}),this.on("pause",()=>{t.pause()}),t.once("end",()=>{this.push(null)}),this.emit("response",t);for(let a of this[vt])if(!a.headersSent){for(let l in t.headers){let u=r.decompress?l!=="content-encoding":!0,y=t.headers[l];u&&a.setHeader(l,y)}a.statusCode=n}}async _onResponse(t){try{await this._onResponseBase(t)}catch(r){this._beforeError(r)}}_onRequest(t){let{options:r}=this,{timeout:s,url:n}=r;Pu.default(t),this[jr]=qi.default(t,s,n);let i=r.cache?"cacheableResponse":"response";t.once(i,l=>{this._onResponse(l)}),t.once("error",l=>{var u;t.destroy(),(u=t.res)===null||u===void 0||u.removeAllListeners("end"),l=l instanceof qi.TimeoutError?new Lr(l,this.timings,this):new H(l.message,l,this),this._beforeError(l)}),this[Di]=ju.default(t,this,Wu),this[B]=t,this.emit("uploadProgress",this.uploadProgress);let o=this[we],a=this.redirects.length===0?this:t;h.default.nodeStream(o)?(o.pipe(a),o.once("error",l=>{this._beforeError(new Ur(l,this))})):(this._unlockWrite(),h.default.undefined(o)?(this._cannotHaveBody||this._noPipe)&&(a.end(),this._lockWrite()):(this._writeRequest(o,void 0,()=>{}),a.end(),this._lockWrite())),this.emit("request",t)}async _createCacheableRequest(t,r){return new Promise((s,n)=>{Object.assign(r,Mu.default(t)),delete r.url;let i,o=Mr.get(r.cache)(r,async a=>{a._readableState.autoDestroy=!1,i&&(await i).emit("cacheableResponse",a),s(a)});r.url=t,o.once("error",n),o.once("request",async a=>{i=a,s(i)})})}async _makeRequest(){var t,r,s,n,i;let{options:o}=this,{headers:a}=o;for(let E in a)if(h.default.undefined(a[E]))delete a[E];else if(h.default.null_(a[E]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${E}\` header`);if(o.decompress&&h.default.undefined(a["accept-encoding"])&&(a["accept-encoding"]=Hu?"gzip, deflate, br":"gzip, deflate"),o.cookieJar){let E=await o.cookieJar.getCookieString(o.url.toString());h.default.nonEmptyString(E)&&(o.headers.cookie=E)}for(let E of o.hooks.beforeRequest){let q=await E(o);if(!h.default.undefined(q)){o.request=()=>q;break}}o.body&&this[we]!==o.body&&(this[we]=o.body);let{agent:l,request:u,timeout:y,url:f}=o;if(o.dnsCache&&!("lookup"in o)&&(o.lookup=o.dnsCache.lookup),f.hostname==="unix"){let E=/(?<socketPath>.+?):(?<path>.+)/.exec(`${f.pathname}${f.search}`);if(E==null?void 0:E.groups){let{socketPath:q,path:U}=E.groups;Object.assign(o,{socketPath:q,path:U,host:""})}}let d=f.protocol==="https:",m;o.http2?m=Cu.auto:m=d?Ou.request:xi.request;let g=(t=o.request)!==null&&t!==void 0?t:m,v=o.cache?this._createCacheableRequest:g;l&&!o.http2&&(o.agent=l[d?"https":"http"]),o[B]=g,delete o.request,delete o.timeout;let p=o;if(p.shared=(r=o.cacheOptions)===null||r===void 0?void 0:r.shared,p.cacheHeuristic=(s=o.cacheOptions)===null||s===void 0?void 0:s.cacheHeuristic,p.immutableMinTimeToLive=(n=o.cacheOptions)===null||n===void 0?void 0:n.immutableMinTimeToLive,p.ignoreCargoCult=(i=o.cacheOptions)===null||i===void 0?void 0:i.ignoreCargoCult,o.dnsLookupIpVersion!==void 0)try{p.family=Mi.dnsLookupIpVersionToFamily(o.dnsLookupIpVersion)}catch{throw new Error("Invalid `dnsLookupIpVersion` option value")}o.https&&("rejectUnauthorized"in o.https&&(p.rejectUnauthorized=o.https.rejectUnauthorized),o.https.checkServerIdentity&&(p.checkServerIdentity=o.https.checkServerIdentity),o.https.certificateAuthority&&(p.ca=o.https.certificateAuthority),o.https.certificate&&(p.cert=o.https.certificate),o.https.key&&(p.key=o.https.key),o.https.passphrase&&(p.passphrase=o.https.passphrase),o.https.pfx&&(p.pfx=o.https.pfx));try{let E=await v(f,p);h.default.undefined(E)&&(E=m(f,p)),o.request=u,o.timeout=y,o.agent=l,o.https&&("rejectUnauthorized"in o.https&&delete p.rejectUnauthorized,o.https.checkServerIdentity&&delete p.checkServerIdentity,o.https.certificateAuthority&&delete p.ca,o.https.certificate&&delete p.cert,o.https.key&&delete p.key,o.https.passphrase&&delete p.passphrase,o.https.pfx&&delete p.pfx),Bu(E)?this._onRequest(E):this.writable?(this.once("finish",()=>{this._onResponse(E)}),this._unlockWrite(),this.end(),this._lockWrite()):this._onResponse(E)}catch(E){throw E instanceof Ci.CacheError?new Ir(E,this):new H(E.message,E,this)}}async _error(t){try{for(let r of this.options.hooks.beforeError)t=await r(t)}catch(r){t=new H(r.message,r,this)}this.destroy(t)}_beforeError(t){if(this[Le])return;let{options:r}=this,s=this.retryCount+1;this[Le]=!0,t instanceof H||(t=new H(t.message,t,this));let n=t,{response:i}=n;(async()=>{if(i&&!i.body){i.setEncoding(this._readableState.encoding);try{i.rawBody=await $u.default(i),i.body=i.rawBody.toString()}catch{}}if(this.listenerCount("retry")!==0){let o;try{let a;i&&"retry-after"in i.headers&&(a=Number(i.headers["retry-after"]),Number.isNaN(a)?(a=Date.parse(i.headers["retry-after"])-Date.now(),a<=0&&(a=1)):a*=1e3),o=await r.retry.calculateDelay({attemptCount:s,retryOptions:r.retry,error:n,retryAfter:a,computedValue:Lu.default({attemptCount:s,retryOptions:r.retry,error:n,retryAfter:a,computedValue:0})})}catch(a){this._error(new H(a.message,a,this));return}if(o){let a=async()=>{try{for(let l of this.options.hooks.beforeRetry)await l(this.options,n,s)}catch(l){this._error(new H(l.message,t,this));return}this.destroyed||(this.destroy(),this.emit("retry",s,t))};this[Li]=setTimeout(a,o);return}}this._error(n)})()}_read(){this[Et]=!0;let t=this[bt];if(t&&!this[Le]){t.readableLength&&(this[Et]=!1);let r;for(;(r=t.read())!==null;){this[$e]+=r.length,this[Ii]=!0;let s=this.downloadProgress;s.percent<1&&this.emit("downloadProgress",s),this.push(r)}}}_write(t,r,s){let n=()=>{this._writeRequest(t,r,s)};this.requestInitialized?n():this[Xe].push(n)}_writeRequest(t,r,s){this[B].destroyed||(this._progressCallbacks.push(()=>{this[Ue]+=Buffer.byteLength(t,r);let n=this.uploadProgress;n.percent<1&&this.emit("uploadProgress",n)}),this[B].write(t,r,n=>{!n&&this._progressCallbacks.length>0&&this._progressCallbacks.shift()(),s(n)}))}_final(t){let r=()=>{for(;this._progressCallbacks.length!==0;)this._progressCallbacks.shift()();if(!(B in this)){t();return}if(this[B].destroyed){t();return}this[B].end(s=>{s||(this[Ie]=this[Ue],this.emit("uploadProgress",this.uploadProgress),this[B].emit("upload-complete")),t(s)})};this.requestInitialized?r():this[Xe].push(r)}_destroy(t,r){var s;this[Le]=!0,clearTimeout(this[Li]),B in this&&(this[jr](),((s=this[bt])===null||s===void 0?void 0:s.complete)||this[B].destroy()),t!==null&&!h.default.undefined(t)&&!(t instanceof H)&&(t=new H(t.message,t,this)),r(t)}get _isAboutToError(){return this[Le]}get ip(){var t;return(t=this.socket)===null||t===void 0?void 0:t.remoteAddress}get aborted(){var t,r,s;return((r=(t=this[B])===null||t===void 0?void 0:t.destroyed)!==null&&r!==void 0?r:this.destroyed)&&!((s=this[Ui])===null||s===void 0?void 0:s.complete)}get socket(){var t,r;return(r=(t=this[B])===null||t===void 0?void 0:t.socket)!==null&&r!==void 0?r:void 0}get downloadProgress(){let t;return this[De]?t=this[$e]/this[De]:this[De]===this[$e]?t=1:t=0,{percent:t,transferred:this[$e],total:this[De]}}get uploadProgress(){let t;return this[Ie]?t=this[Ue]/this[Ie]:this[Ie]===this[Ue]?t=1:t=0,{percent:t,transferred:this[Ue],total:this[Ie]}}get timings(){var t;return(t=this[B])===null||t===void 0?void 0:t.timings}get isFromCache(){return this[$i]}pipe(t,r){if(this[Ii])throw new Error("Failed to pipe. The response has been emitted already.");return t instanceof kr.ServerResponse&&this[vt].add(t),super.pipe(t,r)}unpipe(t){return t instanceof kr.ServerResponse&&this[vt].delete(t),super.unpipe(t),this}};C.default=Nr});var et=b(te=>{"use strict";var Gu=te&&te.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),Ju=te&&te.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Gu(t,e,r)};Object.defineProperty(te,"__esModule",{value:!0});te.CancelError=te.ParseError=void 0;var Hi=Ze(),Ni=class extends Hi.RequestError{constructor(t,r){let{options:s}=r.request;super(`${t.message} in "${s.url.toString()}"`,t,r.request);this.name="ParseError",this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_BODY_PARSE_FAILURE":this.code}};te.ParseError=Ni;var Bi=class extends Hi.RequestError{constructor(t){super("Promise was canceled",{},t);this.name="CancelError",this.code="ERR_CANCELED"}get isCanceled(){return!0}};te.CancelError=Bi;Ju(Ze(),te)});var Fi=b(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});var zi=et(),Ku=(e,t,r,s)=>{let{rawBody:n}=e;try{if(t==="text")return n.toString(s);if(t==="json")return n.length===0?"":r(n.toString());if(t==="buffer")return n;throw new zi.ParseError({message:`Unknown body type '${t}'`,name:"Error"},e)}catch(i){throw new zi.ParseError(i,e)}};Br.default=Ku});var zr=b(be=>{"use strict";var Yu=be&&be.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),Qu=be&&be.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Yu(t,e,r)};Object.defineProperty(be,"__esModule",{value:!0});var Xu=require("events"),Zu=ue(),el=Ms(),Tt=et(),Vi=Fi(),Wi=Ze(),tl=br(),rl=Pr(),Gi=Ar(),sl=["request","response","redirect","uploadProgress","downloadProgress"];function Ji(e){let t,r,s=new Xu.EventEmitter,n=new el((o,a,l)=>{let u=y=>{let f=new Wi.default(void 0,e);f.retryCount=y,f._noPipe=!0,l(()=>f.destroy()),l.shouldReject=!1,l(()=>a(new Tt.CancelError(f))),t=f,f.once("response",async g=>{var v;if(g.retryCount=y,g.request.aborted)return;let p;try{p=await rl.default(f),g.rawBody=p}catch{return}if(f._isAboutToError)return;let E=((v=g.headers["content-encoding"])!==null&&v!==void 0?v:"").toLowerCase(),q=["gzip","deflate","br"].includes(E),{options:U}=f;if(q&&!U.decompress)g.body=p;else try{g.body=Vi.default(g,U.responseType,U.parseJson,U.encoding)}catch(N){if(g.body=p.toString(),Gi.isResponseOk(g)){f._beforeError(N);return}}try{for(let[N,se]of U.hooks.afterResponse.entries())g=await se(g,async fe=>{let $=Wi.default.normalizeArguments(void 0,{...fe,retry:{calculateDelay:()=>0},throwHttpErrors:!1,resolveBodyOnly:!1},U);$.hooks.afterResponse=$.hooks.afterResponse.slice(0,N);for(let Te of $.hooks.beforeRetry)await Te($);let k=Ji($);return l(()=>{k.catch(()=>{}),k.cancel()}),k})}catch(N){f._beforeError(new Tt.RequestError(N.message,N,f));return}if(!Gi.isResponseOk(g)){f._beforeError(new Tt.HTTPError(g));return}r=g,o(f.options.resolveBodyOnly?g.body:g)});let d=g=>{if(n.isCanceled)return;let{options:v}=f;if(g instanceof Tt.HTTPError&&!v.throwHttpErrors){let{response:p}=g;o(f.options.resolveBodyOnly?p.body:p);return}a(g)};f.once("error",d);let m=f.options.body;f.once("retry",(g,v)=>{var p,E;if(m===((p=v.request)===null||p===void 0?void 0:p.options.body)&&Zu.default.nodeStream((E=v.request)===null||E===void 0?void 0:E.options.body)){d(v);return}u(g)}),tl.default(f,s,sl)};u(0)});n.on=(o,a)=>(s.on(o,a),n);let i=o=>{let a=(async()=>{await n;let{options:l}=r.request;return Vi.default(r,o,l.parseJson,l.encoding)})();return Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)),a};return n.json=()=>{let{headers:o}=t.options;return!t.writableFinished&&o.accept===void 0&&(o.accept="application/json"),i("json")},n.buffer=()=>i("buffer"),n.text=()=>i("text"),n}be.default=Ji;Qu(et(),be)});var Ki=b(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});var nl=et();function il(e,...t){let r=(async()=>{if(e instanceof nl.RequestError)try{for(let n of t)if(n)for(let i of n)e=await i(e)}catch(n){e=n}throw e})(),s=()=>r;return r.json=s,r.text=s,r.buffer=s,r.on=s,r}Fr.default=il});var Xi=b(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});var Yi=ue();function Qi(e){for(let t of Object.values(e))(Yi.default.plainObject(t)||Yi.default.array(t))&&Qi(t);return Object.freeze(e)}Vr.default=Qi});var eo=b(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0})});var Wr=b(Z=>{"use strict";var ol=Z&&Z.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),al=Z&&Z.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ol(t,e,r)};Object.defineProperty(Z,"__esModule",{value:!0});Z.defaultHandler=void 0;var to=ue(),X=zr(),cl=Ki(),Rt=Ze(),ul=Xi(),ll={RequestError:X.RequestError,CacheError:X.CacheError,ReadError:X.ReadError,HTTPError:X.HTTPError,MaxRedirectsError:X.MaxRedirectsError,TimeoutError:X.TimeoutError,ParseError:X.ParseError,CancelError:X.CancelError,UnsupportedProtocolError:X.UnsupportedProtocolError,UploadError:X.UploadError},hl=async e=>new Promise(t=>{setTimeout(t,e)}),{normalizeArguments:Ot}=Rt.default,ro=(...e)=>{let t;for(let r of e)t=Ot(void 0,r,t);return t},fl=e=>e.isStream?new Rt.default(void 0,e):X.default(e),dl=e=>"defaults"in e&&"options"in e.defaults,pl=["get","post","put","patch","head","delete"];Z.defaultHandler=(e,t)=>t(e);var so=(e,t)=>{if(e)for(let r of e)r(t)},no=e=>{e._rawHandlers=e.handlers,e.handlers=e.handlers.map(s=>(n,i)=>{let o,a=s(n,l=>(o=i(l),o));if(a!==o&&!n.isStream&&o){let l=a,{then:u,catch:y,finally:f}=l;Object.setPrototypeOf(l,Object.getPrototypeOf(o)),Object.defineProperties(l,Object.getOwnPropertyDescriptors(o)),l.then=u,l.catch=y,l.finally=f}return a});let t=(s,n={},i)=>{var o,a;let l=0,u=y=>e.handlers[l++](y,l===e.handlers.length?fl:u);if(to.default.plainObject(s)){let y={...s,...n};Rt.setNonEnumerableProperties([s,n],y),n=y,s=void 0}try{let y;try{so(e.options.hooks.init,n),so((o=n.hooks)===null||o===void 0?void 0:o.init,n)}catch(d){y=d}let f=Ot(s,n,i??e.options);if(f[Rt.kIsNormalizedAlready]=!0,y)throw new X.RequestError(y.message,y,f);return u(f)}catch(y){if(n.isStream)throw y;return cl.default(y,e.options.hooks.beforeError,(a=n.hooks)===null||a===void 0?void 0:a.beforeError)}};t.extend=(...s)=>{let n=[e.options],i=[...e._rawHandlers],o;for(let a of s)dl(a)?(n.push(a.defaults.options),i.push(...a.defaults._rawHandlers),o=a.defaults.mutableDefaults):(n.push(a),"handlers"in a&&i.push(...a.handlers),o=a.mutableDefaults);return i=i.filter(a=>a!==Z.defaultHandler),i.length===0&&i.push(Z.defaultHandler),no({options:ro(...n),handlers:i,mutableDefaults:Boolean(o)})};let r=async function*(s,n){let i=Ot(s,n,e.options);i.resolveBodyOnly=!1;let o=i.pagination;if(!to.default.object(o))throw new TypeError("`options.pagination` must be implemented");let a=[],{countLimit:l}=o,u=0;for(;u<o.requestLimit;){u!==0&&await hl(o.backoff);let y=await t(void 0,void 0,i),f=await o.transform(y),d=[];for(let g of f)if(o.filter(g,a,d)&&(!o.shouldContinue(g,a,d)||(yield g,o.stackAllItems&&a.push(g),d.push(g),--l<=0)))return;let m=o.paginate(y,a,d);if(m===!1)return;m===y.request.options?i=y.request.options:m!==void 0&&(i=Ot(void 0,m,i)),u++}};t.paginate=r,t.paginate.all=async(s,n)=>{let i=[];for await(let o of r(s,n))i.push(o);return i},t.paginate.each=r,t.stream=(s,n)=>t(s,{...n,isStream:!0});for(let s of pl)t[s]=(n,i)=>t(n,{...i,method:s}),t.stream[s]=(n,i)=>t(n,{...i,method:s,isStream:!0});return Object.assign(t,ll),Object.defineProperty(t,"defaults",{value:e.mutableDefaults?e:ul.default(e),writable:e.mutableDefaults,configurable:e.mutableDefaults,enumerable:!0}),t.mergeOptions=ro,t};Z.default=no;al(eo(),Z)});var ao=b((he,Pt)=>{"use strict";var ml=he&&he.__createBinding||(Object.create?function(e,t,r,s){s===void 0&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){s===void 0&&(s=r),e[s]=t[r]}),io=he&&he.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&ml(t,e,r)};Object.defineProperty(he,"__esModule",{value:!0});var yl=require("url"),oo=Wr(),gl={options:{method:"GET",retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:e})=>e},timeout:{},headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},hooks:{init:[],beforeRequest:[],beforeRedirect:[],beforeRetry:[],beforeError:[],afterResponse:[]},cache:void 0,dnsCache:void 0,decompress:!0,throwHttpErrors:!0,followRedirect:!0,isStream:!1,responseType:"text",resolveBodyOnly:!1,maxRedirects:10,prefixUrl:"",methodRewriting:!0,ignoreInvalidCookies:!1,context:{},http2:!1,allowGetBody:!1,https:void 0,pagination:{transform:e=>e.request.options.responseType==="json"?e.body:JSON.parse(e.body),paginate:e=>{if(!Reflect.has(e.headers,"link"))return!1;let t=e.headers.link.split(","),r;for(let s of t){let n=s.split(";");if(n[1].includes("next")){r=n[0].trimStart().trim(),r=r.slice(1,-1);break}}return r?{url:new yl.URL(r)}:!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:1/0,backoff:0,requestLimit:1e4,stackAllItems:!0},parseJson:e=>JSON.parse(e),stringifyJson:e=>JSON.stringify(e),cacheOptions:{}},handlers:[oo.defaultHandler],mutableDefaults:!1},Gr=oo.default(gl);he.default=Gr;Pt.exports=Gr;Pt.exports.default=Gr;Pt.exports.__esModule=!0;io(Wr(),he);io(zr(),he)});var co=b((Jr,Kr)=>{(function(e,t){typeof Jr=="object"&&typeof Kr!="undefined"?Kr.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self).dayjs=t()})(Jr,function(){"use strict";var e=1e3,t=6e4,r=36e5,s="millisecond",n="second",i="minute",o="hour",a="day",l="week",u="month",y="quarter",f="year",d="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},E=function(O,T,w){var P=String(O);return!P||P.length>=T?O:""+Array(T+1-P.length).join(w)+O},q={s:E,z:function(O){var T=-O.utcOffset(),w=Math.abs(T),P=Math.floor(w/60),S=w%60;return(T<=0?"+":"-")+E(P,2,"0")+":"+E(S,2,"0")},m:function O(T,w){if(T.date()<w.date())return-O(w,T);var P=12*(w.year()-T.year())+(w.month()-T.month()),S=T.clone().add(P,u),x=w-S<0,A=T.clone().add(P+(x?-1:1),u);return+(-(P+(w-S)/(x?S-A:A-S))||0)},a:function(O){return O<0?Math.ceil(O)||0:Math.floor(O)},p:function(O){return{M:u,y:f,w:l,d:a,D:d,h:o,m:i,s:n,ms:s,Q:y}[O]||String(O||"").toLowerCase().replace(/s$/,"")},u:function(O){return O===void 0}},U="en",N={};N[U]=p;var se=function(O){return O instanceof Te},fe=function(O,T,w){var P;if(!O)return U;if(typeof O=="string")N[O]&&(P=O),T&&(N[O]=T,P=O);else{var S=O.name;N[S]=O,P=S}return!w&&P&&(U=P),P||!w&&U},$=function(O,T){if(se(O))return O.clone();var w=typeof T=="object"?T:{};return w.date=O,w.args=arguments,new Te(w)},k=q;k.l=fe,k.i=se,k.w=function(O,T){return $(O,{locale:T.$L,utc:T.$u,x:T.$x,$offset:T.$offset})};var Te=function(){function O(w){this.$L=fe(w.locale,null,!0),this.parse(w)}var T=O.prototype;return T.parse=function(w){this.$d=function(P){var S=P.date,x=P.utc;if(S===null)return new Date(NaN);if(k.u(S))return new Date;if(S instanceof Date)return new Date(S);if(typeof S=="string"&&!/Z$/i.test(S)){var A=S.match(g);if(A){var M=A[2]-1||0,L=(A[7]||"0").substring(0,3);return x?new Date(Date.UTC(A[1],M,A[3]||1,A[4]||0,A[5]||0,A[6]||0,L)):new Date(A[1],M,A[3]||1,A[4]||0,A[5]||0,A[6]||0,L)}}return new Date(S)}(w),this.$x=w.x||{},this.init()},T.init=function(){var w=this.$d;this.$y=w.getFullYear(),this.$M=w.getMonth(),this.$D=w.getDate(),this.$W=w.getDay(),this.$H=w.getHours(),this.$m=w.getMinutes(),this.$s=w.getSeconds(),this.$ms=w.getMilliseconds()},T.$utils=function(){return k},T.isValid=function(){return this.$d.toString()!==m},T.isSame=function(w,P){var S=$(w);return this.startOf(P)<=S&&S<=this.endOf(P)},T.isAfter=function(w,P){return $(w)<this.startOf(P)},T.isBefore=function(w,P){return this.endOf(P)<$(w)},T.$g=function(w,P,S){return k.u(w)?this[P]:this.set(S,w)},T.unix=function(){return Math.floor(this.valueOf()/1e3)},T.valueOf=function(){return this.$d.getTime()},T.startOf=function(w,P){var S=this,x=!!k.u(P)||P,A=k.p(w),M=function(Re,G){var pe=k.w(S.$u?Date.UTC(S.$y,G,Re):new Date(S.$y,G,Re),S);return x?pe:pe.endOf(a)},L=function(Re,G){return k.w(S.toDate()[Re].apply(S.toDate("s"),(x?[0,0,0,0]:[23,59,59,999]).slice(G)),S)},I=this.$W,z=this.$M,de=this.$D,oe="set"+(this.$u?"UTC":"");switch(A){case f:return x?M(1,0):M(31,11);case u:return x?M(1,z):M(0,z+1);case l:var He=this.$locale().weekStart||0,Ne=(I<He?I+7:I)-He;return M(x?de-Ne:de+(6-Ne),z);case a:case d:return L(oe+"Hours",0);case o:return L(oe+"Minutes",1);case i:return L(oe+"Seconds",2);case n:return L(oe+"Milliseconds",3);default:return this.clone()}},T.endOf=function(w){return this.startOf(w,!1)},T.$set=function(w,P){var S,x=k.p(w),A="set"+(this.$u?"UTC":""),M=(S={},S[a]=A+"Date",S[d]=A+"Date",S[u]=A+"Month",S[f]=A+"FullYear",S[o]=A+"Hours",S[i]=A+"Minutes",S[n]=A+"Seconds",S[s]=A+"Milliseconds",S)[x],L=x===a?this.$D+(P-this.$W):P;if(x===u||x===f){var I=this.clone().set(d,1);I.$d[M](L),I.init(),this.$d=I.set(d,Math.min(this.$D,I.daysInMonth())).$d}else M&&this.$d[M](L);return this.init(),this},T.set=function(w,P){return this.clone().$set(w,P)},T.get=function(w){return this[k.p(w)]()},T.add=function(w,P){var S,x=this;w=Number(w);var A=k.p(P),M=function(z){var de=$(x);return k.w(de.date(de.date()+Math.round(z*w)),x)};if(A===u)return this.set(u,this.$M+w);if(A===f)return this.set(f,this.$y+w);if(A===a)return M(1);if(A===l)return M(7);var L=(S={},S[i]=t,S[o]=r,S[n]=e,S)[A]||1,I=this.$d.getTime()+w*L;return k.w(I,this)},T.subtract=function(w,P){return this.add(-1*w,P)},T.format=function(w){var P=this,S=this.$locale();if(!this.isValid())return S.invalidDate||m;var x=w||"YYYY-MM-DDTHH:mm:ssZ",A=k.z(this),M=this.$H,L=this.$m,I=this.$M,z=S.weekdays,de=S.months,oe=function(G,pe,At,nt){return G&&(G[pe]||G(P,x))||At[pe].substr(0,nt)},He=function(G){return k.s(M%12||12,G,"0")},Ne=S.meridiem||function(G,pe,At){var nt=G<12?"AM":"PM";return At?nt.toLowerCase():nt},Re={YY:String(this.$y).slice(-2),YYYY:this.$y,M:I+1,MM:k.s(I+1,2,"0"),MMM:oe(S.monthsShort,I,de,3),MMMM:oe(de,I),D:this.$D,DD:k.s(this.$D,2,"0"),d:String(this.$W),dd:oe(S.weekdaysMin,this.$W,z,2),ddd:oe(S.weekdaysShort,this.$W,z,3),dddd:z[this.$W],H:String(M),HH:k.s(M,2,"0"),h:He(1),hh:He(2),a:Ne(M,L,!0),A:Ne(M,L,!1),m:String(L),mm:k.s(L,2,"0"),s:String(this.$s),ss:k.s(this.$s,2,"0"),SSS:k.s(this.$ms,3,"0"),Z:A};return x.replace(v,function(G,pe){return pe||Re[G]||A.replace(":","")})},T.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},T.diff=function(w,P,S){var x,A=k.p(P),M=$(w),L=(M.utcOffset()-this.utcOffset())*t,I=this-M,z=k.m(this,M);return z=(x={},x[f]=z/12,x[u]=z,x[y]=z/3,x[l]=(I-L)/6048e5,x[a]=(I-L)/864e5,x[o]=I/r,x[i]=I/t,x[n]=I/e,x)[A]||I,S?z:k.a(z)},T.daysInMonth=function(){return this.endOf(u).$D},T.$locale=function(){return N[this.$L]},T.locale=function(w,P){if(!w)return this.$L;var S=this.clone(),x=fe(w,P,!0);return x&&(S.$L=x),S},T.clone=function(){return k.w(this.$d,this)},T.toDate=function(){return new Date(this.valueOf())},T.toJSON=function(){return this.isValid()?this.toISOString():null},T.toISOString=function(){return this.$d.toISOString()},T.toString=function(){return this.$d.toUTCString()},O}(),Qr=Te.prototype;return $.prototype=Qr,[["$ms",s],["$s",n],["$m",i],["$H",o],["$W",a],["$M",u],["$y",f],["$D",d]].forEach(function(O){Qr[O[1]]=function(T){return this.$g(T,O[0],O[1])}}),$.extend=function(O,T){return O.$i||(O(T,Te,$),O.$i=!0),$},$.locale=fe,$.isDayjs=se,$.unix=function(O){return $(1e3*O)},$.en=N[U],$.Ls=N,$.p={},$})});var re=Ct(Dt()),Yr=Ct(ao()),uo=Ct(co());process.env.TZ="Asia/Seoul";var tt,rt,st,_l=e=>Be(void 0,null,function*(){console.log({tjiraHostname:typeof tt,tpassword:typeof st,tusername:typeof rt}),console.log(JSON.stringify({jiraHostname:tt,username:rt,password:st}));let t=new URL(`/rest/api/2/project/${e}/versions`,tt).toString();return Yr.default.get(t,{username:rt,password:st}).json()}),wl=(e,t,r)=>Be(void 0,null,function*(){let s=new URL("/rest/api/2/version",tt).toString();return Yr.default.post(s,{username:rt,password:st,json:{name:t,project:e,released:r}}).json()}),bl=(e,t)=>e.find(r=>r.name===t);function vl(){return Be(this,null,function*(){tt=re.getInput("jira-hostname"),rt=re.getInput("jira-username"),st=re.getInput("jira-password");let e=re.getInput("projects"),t=re.getInput("suffix"),r=(0,uo.default)().format("YYYY.MM.DD"),s=re.getInput("version-name")||(t?`v${r} - ${t}`:`v${r}`),n=yield Promise.all(e.split(",").map(i=>Be(this,null,function*(){console.log({project:i});let o=yield _l(i),a=bl(o,s)||(yield wl(i,s,re.getBooleanInput("version-released")));return{project:i,version:a}})));re.setOutput("result",n)})}vl();
